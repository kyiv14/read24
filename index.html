<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ü–ª–µ–π–ª–∏—Å—Ç</title>
  <link rel="icon" type="image/x-icon" href="https://read24.netlify.app/icon1.ico">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
    #categoryFilter {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem; /* rounded-xl */
      padding: 0.5rem; /* p-2 */
    }
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }
    /* CSS –î–õ–Ø –ê–ù–ò–ú–ê–¶–ò–ò –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ì–û –¢–ï–ö–°–¢–ê */
    @keyframes text-fade-in {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .dynamic-text-animated {
      animation: text-fade-in 0.4s ease-out;
    }
    /* –ö–û–ù–ï–¶ –ù–û–í–û–ì–û CSS */

    /* –ù–û–í–´–ï –°–¢–ò–õ–´ –î–õ–Ø –ë–õ–û–ö–ê "–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢" */
    @keyframes step-fade-in {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .step-item {
        animation: step-fade-in 0.6s ease-out forwards;
        opacity: 0; /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }
    .step-item:nth-child(1) { animation-delay: 0s; }
    .step-item:nth-child(2) { animation-delay: 0.15s; }
    .step-item:nth-child(3) { animation-delay: 0.30s; }
    .step-item:nth-child(4) { animation-delay: 0.45s; }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å */
    .sortable-channel {
      cursor: grab;
      touch-action: none; /* –£–ª—É—á—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ */
    .sortable-ghost {
      opacity: 0.4;
      background-color: #f3f4f6; /* bg-gray-100 */
      border: 2px dashed #9ca3af; /* border-gray-400 */
      border-radius: 0.75rem;
    }

    /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø –∫ body, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∞–ø–∫–æ–π */
    body {
        padding-top: 60px; /* –í—ã—Å–æ—Ç–∞ —à–∞–ø–∫–∏ + –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–ø–∞—Å */
    }
    
    /* ************************************************************ */
    /* –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø: 24PX –î–õ–Ø –û–°–ù–û–í–ù–û–ì–û –ó–ê–ì–û–õ–û–í–ö–ê */
    /* ************************************************************ */
    @media (max-width: 640px) { /* sm breakpoint –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Tailwind */
        #heroBlock h1 {
            font-size: 24px; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º 24px */
        }
        
      .channel-item {
        flex-direction: column;
        align-items: flex-start;
        padding: 0.75rem 1rem; /* –£–≤–µ–ª–∏—á–∏–º –æ—Ç—Å—Ç—É–ø—ã */
      }
      .channel-name {
        max-width: 100% !important; /* –ù–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
        margin-bottom: 0.5rem;
        font-size: 24px; /* –†–∞–∑–º–µ—Ä 24px */
        font-weight: 900; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
      }
      .channel-buttons-container {
        display: flex; /* –°–Ω–æ–≤–∞ –¥–µ–ª–∞–µ–º flex –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        flex-direction: row; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ */
        justify-content: space-between;
        width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
      }
      
      .channel-download-btn, .channel-delete-btn, .channel-favorite-btn { /* –î–û–ë–ê–í–õ–ï–ù .channel-favorite-btn */
          flex-shrink: 0;
      }
      
      /* –ù–û–í–´–ï –°–¢–ò–õ–´ –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–û–ô –ê–î–ê–ü–¢–ê–¶–ò–ò –≠–ö–†–ê–ù–ê –†–ï–î–ê–ö–¢–û–†–ê */
      #editorScreen .sm\\:justify-between {
          justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      }
      #editorScreen .sm\\:items-center {
          align-items: center; 
      }
      #editorScreen .sm\\:flex-row {
          flex-direction: column; /* –†–∞–∑–º–µ—â–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
      }
      #editorScreen .sm\\:text-left {
          text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
      }
      #editorScreen .sm\\:w-auto {
          width: 100%; /* –ö–Ω–æ–ø–∫–∏ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
          justify-content: center;
          margin-top: 0.5rem; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é (–ì–∞–º–±—É—Ä–≥–µ—Ä) */
      #siteMenu {
          position: absolute;
          top: 56px; /* –í—ã—Å–æ—Ç–∞ —à–∞–ø–∫–∏ */
          left: 0;
          right: 0;
          background-color: white;
          padding: 1rem 0;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
          flex-direction: column;
          align-items: center;
          z-index: 20;
          display: none;
      }
      #siteMenu.open {
          display: flex;
      }
      #siteMenu a {
          padding: 0.5rem 1rem;
          width: 100%;
          text-align: center;
          border-bottom: 1px solid #f3f4f6; /* gray-100 */
      }
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ */
    @media (min-width: 641px) {
        #menuButton {
            display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –≥–∞–º–±—É—Ä–≥–µ—Ä –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
        }
        /* –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —à–∞–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç flex-basis/grow –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–Ω—é */
        .header-content {
            display: flex;
            width: 100%;
            justify-content: space-between;
            align-items: center;
        }
        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é –º–µ–∂–¥—É –ª–æ–≥–æ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ */
        #siteMenu {
            display: flex;
            flex-grow: 1; /* –ü–æ–∑–≤–æ–ª—è–µ–º –º–µ–Ω—é –∑–∞–Ω—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–µ–Ω—é */
            align-items: center;
        }
        /* –î–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞ –∏ –∫–Ω–æ–ø–æ–∫ –≤–ø—Ä–∞–≤–æ */
        .auth-container {
            flex-shrink: 0;
            display: flex;
            align-items: center;
        }
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
    .comparison-card {
        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏: –±–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç–µ–Ω—å */
        flex-direction: column;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        padding: 1.5rem;
        background-color: #ffffff; /* bg-white */
        border-radius: 1rem; /* rounded-2xl */
        border-top-width: 4px;
        box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* –£—Å–∏–ª–µ–Ω–Ω–∞—è —Ç–µ–Ω—å */
        transition: transform 0.3s ease-out; /* –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
    .comparison-feature {
        /* –ò–∑–º–µ–Ω–µ–Ω–æ: –ò—Å–ø–æ–ª—å–∑—É–µ–º flex-start –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤–ª–µ–≤–æ */
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        color: #374151; /* text-gray-700 */
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid #f3f4f6; /* border-gray-100 */
        text-align: left; /* –¢–µ–∫—Å—Ç —Å–ª–µ–≤–∞ */
    }
    .comparison-feature span:first-child {
        /* –¢–µ–∫—Å—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ - –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ—Å—Ç–æ, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å */
        text-align: left;
        max-width: 85%; /* –û—Å—Ç–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ –¥–ª—è –∏–∫–æ–Ω–∫–∏ —Å–ø—Ä–∞–≤–∞ */
        line-height: 1.5;
    }
    .comparison-feature span:last-child {
        /* –ò–∫–æ–Ω–∫–∞ - —Å—Ç—Ä–æ–≥–æ —Å–ø—Ä–∞–≤–∞ */
        flex-shrink: 0;
        margin-left: 0.5rem;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞) */
    @keyframes card-slide-in {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    #comparisonBlock .comparison-card:first-child {
        animation: card-slide-in 0.6s ease-out forwards;
    }
    #comparisonBlock .comparison-card:last-child {
        animation: card-slide-in 0.6s ease-out 0.2s forwards; /* –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤—Ç–æ—Ä–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è FAQ (–ê–∫–∫–æ—Ä–¥–µ–æ–Ω) */
    .faq-item {
        border-bottom: 1px solid #e5e7eb;
        cursor: pointer;
    }
    .faq-question {
        font-weight: 600;
        color: #1f2937;
        padding: 1rem 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: color 0.2s ease-in-out; /* –ê–Ω–∏–º–∞—Ü–∏—è —Ü–≤–µ—Ç–∞ */
        
        /* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ "–≤–Ω–∏–∑" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%234b5563' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right center;
        padding-right: 2rem; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –∏–∫–æ–Ω–∫–∏ */
    }
    .faq-question:hover {
        color: #ef4444; /* red-500 */
    }

    /* –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞: —Ç–µ–∫—Å—Ç –∫—Ä–∞—Å–Ω—ã–π –∏ –∏–∫–æ–Ω–∫–∞ "–≤–≤–µ—Ä—Ö" */
    .faq-item[aria-expanded="true"] .faq-question {
        color: #ef4444; /* red-500 */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ef4444' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'%3E%3C/polyline%3E%3C/svg%3E");
    }

    .faq-answer {
        padding-bottom: 0rem;
        padding-top: 0rem;
        color: #4b5563;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out, padding 0.3s ease-out;
    }
    .faq-item[aria-expanded="true"] .faq-answer {
        max-height: 300px; /* –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è */
        padding-bottom: 1rem;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ë–∞–∑—ã –∑–Ω–∞–Ω–∏–π */
    .article-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .article-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 25px -5px rgba(239, 68, 68, 0.15); /* red-500 shadow */
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ */
    .comparison-icon {
        width: 1.5rem; /* h-6 */
        height: 1.5rem; /* w-6 */
        object-fit: contain;
    }

  </style>
</head>
<body class="bg-white text-black min-h-screen flex items-center justify-center px-4">

  <header id="siteHeader" class="fixed top-0 left-0 w-full bg-white shadow-md z-30">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex justify-between items-center header-content">
      
      <a href="/" class="flex items-center space-x-2 flex-shrink-0">
        <img src="https://read24.netlify.app/icon1.ico" alt="–õ–æ–≥–æ—Ç–∏–ø" class="h-8 w-8">
        <span class="text-xl font-bold text-gray-800 hidden sm:inline"></span>
      </a>

      <nav id="siteMenu" class="hidden sm:flex space-x-6">
        <a href="#whyUsBlock" class="menu-link text-gray-600 hover:text-red-600 transition">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</a>
        <a href="#howItWorksBlock" class="menu-link text-gray-600 hover:text-red-600 transition">–ö–∞–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a href="#comparisonBlock" class="menu-link text-gray-600 hover:text-red-600 transition">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</a>
        <a href="#faqBlock" class="menu-link text-gray-600 hover:text-red-600 transition">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a>
        <a href="/free-playlists" id="freePlaylistsLink" class="menu-link text-gray-600 hover:text-red-600 transition">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã</a>
        <a href="#knowledgeBaseBlock" id="knowledgeBaseLink" class="menu-link text-gray-600 hover:text-red-600 transition">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a>
        </nav>

      <div class="flex items-center space-x-4 auth-container flex-shrink-0">
        
        <button id="openRegisterModalBtnHeader" 
            class="bg-black text-white text-sm font-semibold px-4 py-2 rounded-xl shadow-md hover:bg-gray-900 transition">
            –í–û–ô–¢–ò / –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
        </button>

        <button id="logoutBtn"
          class="bg-red-600 text-white text-sm font-semibold px-4 py-2 rounded-xl shadow-md hover:bg-red-700 transition hidden">
          –í–´–ô–¢–ò
        </button>

        <button id="menuButton" class="sm:hidden text-gray-600 hover:text-red-600 transition p-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
        </button>
      </div>
    </div>
  </header>
  
  <div id="mainScreen" class="text-center w-full max-w-6xl"> 
    
    <div id="heroBlock" class="animate-fade-in mb-8 w-full max-w-4xl mx-auto flex flex-col items-center justify-center min-h-[calc(100vh-60px)]"> 
        <h1 class="text-3xl sm:text-5xl font-extrabold text-gray-800 leading-tight mb-4 max-w-4xl mx-auto">
            <span class="block">–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ª—é–±—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã</span>
            <span class="block">
                <span id="staticTitlePart" class="text-gray-800">–¥–ª—è </span>
                <span id="dynamicTitlePart" class="text-red-600">–ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è</span><span class="text-red-600">.</span>
            </span>
        </h1>
        <p class="text-base sm:text-lg text-gray-600 mb-6 max-w-2xl mx-auto">
            –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∞—à–∏–º–∏ –º–µ–¥–∏–∞—Ç–µ–∫–∞–º–∏, –æ–±—ä–µ–¥–∏–Ω—è—è
            –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—è –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
        </p>
        <button id="goToWhyUsBtn"
            class="bg-red-600 text-white text-lg font-semibold px-10 py-3 rounded-2xl shadow-xl hover:bg-red-700 transition transform hover:scale-105">
            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
        </button>
    </div>
    
    <div id="whyUsBlock" class="w-full max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center min-h-[calc(100vh-60px)]">
        <span class="text-red-600 font-bold text-sm uppercase tracking-wider block mb-2">–ü–û–ß–ï–ú–£ –ú–´?</span>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-gray-800 mb-10">
            –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–∏—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
        </h2>

        <div class="flex flex-wrap justify-center gap-6">
            
            <div class="w-full sm:w-80 p-6 bg-white rounded-2xl shadow-xl flex flex-col items-center text-center transition hover:shadow-2xl">
                <div class="text-red-600 text-4xl mb-4">
                    <img src="https://read24.netlify.app/image/approved.png" alt="–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å" class="w-10 h-10 mx-auto" />
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</h3>
                <p class="text-gray-600 text-sm">
                    –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, —É–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω–æ–µ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –≤–∞—à—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∑–∞ —Å–µ–∫—É–Ω–¥—ã.
                </p>
            </div>

            <div class="w-full sm:w-80 p-6 bg-white rounded-2xl shadow-xl flex flex-col items-center text-center transition hover:shadow-2xl">
                <div class="text-red-600 text-4xl mb-4">
                    <img src="https://read24.netlify.app/image/views.png" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü" class="w-10 h-10 mx-auto" />
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">–ü—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü</h3>
                <p class="text-gray-600 text-sm">
                    –°–º–æ—Ç—Ä–∏—Ç–µ –≤–∞—à–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ: –æ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ Smart TV. –í—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ.
                </p>
            </div>

            <div class="w-full sm:w-80 p-6 bg-white rounded-2xl shadow-xl flex flex-col items-center text-center transition hover:shadow-2xl">
                <div class="text-red-600 text-4xl mb-4">
                    <img src="https://read24.netlify.app/image/library.png" alt="–ï–¥–∏–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞" class="w-10 h-10 mx-auto" />
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3">–ï–¥–∏–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</h3>
                <p class="text-gray-600 text-sm">
                    –û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ–¥–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞.
                </p>
            </div>
        </div>
        
        <button id="startEditingBtn"
            class="bg-red-600 text-white text-lg font-semibold px-10 py-3 rounded-2xl shadow-xl hover:bg-red-700 transition transform hover:scale-105 mt-10">
            –ù–∞—á–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>
    </div>

    <div id="howItWorksBlock" class="w-full max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center min-h-[calc(100vh-60px)]">
        <span class="text-red-600 font-bold text-sm uppercase tracking-wider block mb-2">–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢</span>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-gray-800 mb-12">
            –ü—Ä–æ—Ü–µ—Å—Å –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –ù–∞—á–Ω–∏—Ç–µ –∑–∞ 4 –®–∞–≥–∞
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 max-w-6xl mx-auto relative">
            
            <div class="hidden md:block absolute top-1/4 bottom-1/4 left-0 right-0 h-1 bg-gray-200 mx-10"></div>

            <div class="step-item flex flex-col items-center text-center relative z-10">
                <div class="w-20 h-20 bg-red-600 text-white font-black rounded-full flex items-center justify-center text-3xl mb-4 ring-4 ring-red-200">1</div>
                <h3 class="text-xl font-extrabold text-gray-800 mb-2">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                <p class="text-gray-600 text-sm">
                    –ë—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–π—Ç–µ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±–ª–∞—á–Ω–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É.
                </p>
                <div class="md:hidden h-10 w-1 bg-gray-200 mt-4"></div>
            </div>

            <div class="step-item flex flex-col items-center text-center relative z-10">
                <div class="w-20 h-20 bg-red-600 text-white font-black rounded-full flex items-center justify-center text-3xl mb-4 ring-4 ring-red-200">2</div>
                <h3 class="text-xl font-extrabold text-gray-800 mb-2">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–ª–µ–π–ª–∏—Å—Ç</h3>
                <p class="text-gray-600 text-sm">
                    –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª .m3u, .m3u8, –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
                </p>
                <div class="md:hidden h-10 w-1 bg-gray-200 mt-4"></div>
            </div>

            <div class="step-item flex flex-col items-center text-center relative z-10">
                <div class="w-20 h-20 bg-red-600 text-white font-black rounded-full flex items-center justify-center text-3xl mb-4 ring-4 ring-red-200">3</div>
                <h3 class="text-xl font-extrabold text-gray-800 mb-2">–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫</h3>
                <p class="text-gray-600 text-sm">
                    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–æ–±–Ω—ã–π drag-and-drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞, —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤/—Å—Å—ã–ª–æ–∫.
                </p>
                <div class="md:hidden h-10 w-1 bg-gray-200 mt-4"></div>
            </div>

            <div class="step-item flex flex-col items-center text-center relative z-10">
                <div class="w-20 h-20 bg-red-600 text-white font-black rounded-full flex items-center justify-center text-3xl mb-4 ring-4 ring-red-200">4</div>
                <h3 class="text-xl font-extrabold text-gray-800 mb-2">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ</h3>
                <p class="text-gray-600 text-sm">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è, –∏–ª–∏ —Å–∫–∞—á–∞–µ—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª.
                </p>
                </div>
        </div>
    </div>
    
    <div id="comparisonBlock" class="w-full max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center min-h-[calc(100vh-60px)] bg-white">
        <span class="text-red-600 font-bold text-sm uppercase tracking-wider block mb-2">–í–´–ë–ï–†–ò–¢–ï –°–í–û–ô –ü–£–¢–¨</span>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-gray-800 mb-10">
            –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–æ—Å—Ç—É–ø–æ–≤: –° —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π vs –ë–µ–∑ –Ω–µ–µ
        </h2>

        <div class="flex flex-col lg:flex-row gap-8 w-full max-w-4xl">
            
            <div class="comparison-card border-gray-400">
                <h3 class="text-2xl font-bold text-gray-800 mb-2 text-left">–ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h3>
                <p class="text-sm text-gray-500 mb-6 text-left">–ë–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>

                <div class="flex-grow">
                    <div class="comparison-feature">
                        <span>–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤ –æ–±–ª–∞–∫–µ</span>
                        <span><img src="https://read24.netlify.app/image/2.png" alt="–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)</span>
                        <span><img src="https://read24.netlify.app/image/2.png" alt="–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–î–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π</span>
                        <span><img src="https://read24.netlify.app/image/2.png" alt="–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature border-none">
                        <span>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏</span>
                        <span><img src="https://read24.netlify.app/image/2.png" alt="–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                </div>

                <button class="w-full bg-gray-300 text-gray-800 text-lg font-semibold px-4 py-3 rounded-xl shadow-lg mt-6 hover:bg-gray-400 transition" id="startNoRegBtn">
                    –ù–∞—á–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                </button>
            </div>

            <div class="comparison-card border-red-600">
                <h3 class="text-2xl font-bold text-red-600 mb-2 text-left">–° —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π</h3>
                <p class="text-sm text-gray-500 mb-6 text-left">–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –∏ –æ–±–ª–∞–∫—É.</p>

                <div class="flex-grow">
                    <div class="comparison-feature">
                        <span>–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤ –æ–±–ª–∞–∫–µ</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature">
                        <span>–î–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                    <div class="comparison-feature border-none">
                        <span>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏</span>
                        <span><img src="https://read24.netlify.app/image/1.png" alt="–î–æ—Å—Ç—É–ø–Ω–æ" class="comparison-icon" /></span>
                    </div>
                </div>

                <button id="registerNowCardBtn" class="w-full bg-red-600 text-white text-lg font-semibold px-4 py-3 rounded-xl shadow-lg mt-6 hover:bg-red-700 transition transform hover:scale-105">
                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                </button>
            </div>
        </div>

        <p class="text-gray-600 text-sm mt-10 max-w-xl">
            –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø—Ä–æ–π—Ç–∏ **"–±—ã—Å—Ç—Ä—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é"**.
        </p>
    </div>
    
    <div id="faqBlock" class="w-full max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center min-h-[calc(100vh-60px)]">
        <span class="text-red-600 font-bold text-sm uppercase tracking-wider block mb-2">–°–ü–†–û–°–ò–¢–ï –ù–ê–°</span>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-gray-800 mb-10">
            –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        </h2>

        <div class="w-full max-w-2xl text-left border-t border-gray-200">
            
            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ö–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä?
                </div>
                <div class="faq-answer">
                    <p>
                        –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö **.m3u**, **.m3u8**, –∏–ª–∏ **–¥—Ä—É–≥–∏—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö**, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
                    </p>
                </div>
            </div>

            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ú–æ–≥—É –ª–∏ —è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –≤ –æ–¥–∏–Ω?
                </div>
                <div class="faq-answer">
                    <p>
                        –î–∞, —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞! –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ —Å—Å—ã–ª–æ–∫, –∞ –∑–∞—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö –≤ –æ–¥–Ω—É —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.
                    </p>
                </div>
            </div>

            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ß—Ç–æ —Ç–∞–∫–æ–µ "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç" –∏ –∫–∞–∫ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç?
                </div>
                <div class="faq-answer">
                    <p>
                        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ (–¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏) ‚Äî —ç—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π URL –≤–∞—à–µ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞. –ö–æ–≥–¥–∞ –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ –Ω–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä, –ø–ª–µ–π–ª–∏—Å—Ç –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ **"–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è"** –Ω–∞ –≤—Å–µ—Ö –≤–∞—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (Smart TV, –ø–ª–µ–µ—Ä—ã –∏ —Ç.–¥.).
                    </p>
                </div>
            </div>

            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–æ–π –ø–ª–µ–π–ª–∏—Å—Ç?
                </div>
                <div class="faq-answer">
                    <p>
                        –ê–±—Å–æ–ª—é—Ç–Ω–æ. –ú—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–µ —Ö—Ä–∞–Ω–∏–º –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∞—à–∏—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, –µ—Å–ª–∏ –≤—ã —Å–∞–º–∏ –Ω–µ —Ä–µ—à–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ. –î–∞–∂–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∏ –∑–∞—â–∏—â–µ–Ω—ã.
                    </p>
                </div>
            </div>

            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ú–æ–≥—É –ª–∏ —è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–∞–Ω–∞–ª–æ–≤/—Å—Å—ã–ª–æ–∫?
                </div>
                <div class="faq-answer">
                    <p>
                        –î–∞. –ù–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–º–µ–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **"Drag-and-Drop (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ)"**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–æ—Å—Ç—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º –º—ã—à–∏ –∏–ª–∏ –∫–∞—Å–∞–Ω–∏–µ–º.
                    </p>
                </div>
            </div>
            
            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –ù—É–∂–Ω–æ –ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –ø–ª–µ–π–ª–∏—Å—Ç?
                </div>
                <div class="faq-answer">
                    <p>
                        –ù–µ—Ç, –¥–ª—è **"–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"** –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –û–¥–Ω–∞–∫–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –≤ –æ–±–ª–∞–∫–µ –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞.
                    </p>
                </div>
            </div>
            
            <div class="faq-item" tabindex="0" aria-expanded="false">
                <div class="faq-question" onclick="toggleFaq(this.parentElement)">
                    –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö?
                </div>
                <div class="faq-answer">
                    <p>
                        –î–∞, –Ω–∞—à —Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –≤–∫–ª—é—á–∞—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã, –ø–ª–∞–Ω—à–µ—Ç—ã –∏ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="knowledgeBaseBlock" class="w-full max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8 flex flex-col items-center min-h-[calc(100vh-60px)]">
        <span class="text-red-600 font-bold text-sm uppercase tracking-wider block mb-2">–ü–û–õ–ï–ó–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø</span>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-gray-800 mb-10">
            –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π IPTV –∏ –ü–ª–µ–π–ª–∏—Å—Ç–æ–≤
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl text-left">
            
            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–ß—Ç–æ —Ç–∞–∫–æ–µ IPTV –∏ –∫–∞–∫ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3>
                <p class="text-gray-600 text-sm">–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ Internet Protocol Television, –µ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –ø–µ—Ä–µ–¥ –∫–∞–±–µ–ª—å–Ω—ã–º –¢–í –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#IPTV_–ë–∞–∑–∞</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–§–æ—Ä–º–∞—Ç—ã –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ M3U –∏ M3U8: —Ä–∞–∑–ª–∏—á–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.</h3>
                <p class="text-gray-600 text-sm">–†–∞–∑–±–æ—Ä –¥–≤—É—Ö –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ #EXTINF.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#M3U_–ì–∞–π–¥</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–π IPTV-–ø–ª–µ–µ—Ä –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.</h3>
                <p class="text-gray-600 text-sm">–û–±–∑–æ—Ä –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è Smart TV, Android, iOS –∏ –ü–ö, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö –ø–ª–µ–π–ª–∏—Å—Ç—ã M3U.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–ü–ª–µ–µ—Ä—ã_–û–±–∑–æ—Ä</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º: –ø–æ—á–µ–º—É –ø–ª–µ–π–ª–∏—Å—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–ª–∏ –∫–∞–Ω–∞–ª—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.</h3>
                <p class="text-gray-600 text-sm">–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ—Ä–∞–±–æ—á–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#Troubleshooting</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ IPTV –ø–ª–µ–π–ª–∏—Å—Ç–∞: #EXTINF –∏ –∞—Ç—Ä–∏–±—É—Ç—ã group-title.</h3>
                <p class="text-gray-600 text-sm">–£–≥–ª—É–±–ª–µ–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ–≥–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#EXTINF_–°–µ–∫—Ä–µ—Ç—ã</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–ö–∞–∫ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ–¥–∏–Ω.</h3>
                <p class="text-gray-600 text-sm">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≥–∞–π–¥ –ø–æ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö M3U —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–¥–∏–Ω–æ–π, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–π –º–µ–¥–∏–∞—Ç–µ–∫–∏.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–°–ª–∏—è–Ω–∏–µ_–ì–∞–π–¥</span>
            </a>
            
            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–µ–π–ª–∏—Å—Ç –∏ –ø–æ—á–µ–º—É –æ–Ω–∞ —É–¥–æ–±–Ω–∞.</h3>
                <p class="text-gray-600 text-sm">–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ URL, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–î–∏–Ω–∞–º–∏–∫–∞</span>
            </a>
            
            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è IPTV –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö: –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.</h3>
                <p class="text-gray-600 text-sm">–ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ—Å—à–æ–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ª—é–±–∏–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –ø–ª–∞–Ω—à–µ—Ç–µ –∏ Smart TV.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</span>
            </a>

            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–ö–∞–∫ —É–¥–∞–ª—è—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–∞–Ω–∞–ª–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ –∏ –∑–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ.</h3>
                <p class="text-gray-600 text-sm">–°–æ–≤–µ—Ç—ã –ø–æ –æ—á–∏—Å—Ç–∫–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å—Å—ã–ª–æ–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–û—á–∏—Å—Ç–∫–∞_–î—É–±–ª–∏–∫–∞—Ç–æ–≤</span>
            </a>
            
            <a href="#" class="article-card block bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 class="text-xl font-bold text-gray-800 mb-2 hover:text-red-600 transition">–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤: –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.</h3>
                <p class="text-gray-600 text-sm">–ü–æ—á–µ–º—É —Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –æ–Ω–ª–∞–π–Ω —É–¥–æ–±–Ω–µ–µ, —á–µ–º –ª–æ–∫–∞–ª—å–Ω–æ, –∏ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
                <span class="text-xs text-red-500 font-semibold mt-3 block">#–û–±–ª–∞–∫–æ_–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span>
            </a>
            
        </div>
    </div>
    <div id="unauthenticatedMessage" class="hidden"></div>
    <div id="authButtonContainer" class="hidden"></div>

    <input type="file" id="fileInput" accept="*/*" class="hidden">
    
    <div id="loading" class="hidden text-blue-600 mb-4">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"></div>
      –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...
    </div>

  </div>

  <div id="editorScreen" class="hidden w-full max-w-7xl mx-auto py-6 px-4">
    <div class="flex flex-col sm:flex-row justify-center sm:justify-between items-center mb-4">
      <h1 class="text-xl font-bold text-gray-800 text-center sm:text-left">–†–ï–î–ê–ö–¢–û–† –ö–ê–ù–ê–õ–û–í</h1>
      <div class="flex gap-2 w-full sm:w-auto justify-center sm:justify-end mt-2 sm:mt-0">
        <button id="openUploadModalBtn"
          class="bg-blue-600 text-white px-5 py-2 rounded-xl hover:bg-blue-700 transition text-sm sm:text-base">
          –ó–ê–ì–†–£–ó–ò–¢–¨ –ü–õ–ï–ô–õ–ò–°–¢
        </button>
        <button id="removeDuplicatesBtn"
          class="bg-red-600 text-white px-5 py-2 rounded-xl hover:bg-red-700 transition text-sm sm:text-base">
          –£–î–ê–õ–ò–¢–¨ –î–£–ë–õ–ò
        </button>
        <button id="saveBtn"
          class="bg-black text-white px-5 py-2 rounded-xl hover:bg-gray-900 transition text-sm sm:text-base">
          –°–û–•–†–ê–ù–ò–¢–¨
        </button>
      </div>
    </div>
    
    <div class="flex flex-col md:flex-row gap-6">
      
      <div id="filterPanel" class="w-full md:w-2/5 md:max-h-[80vh] md:overflow-y-auto md:p-2">
        <div class="mb-2">
          <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –∫–∞–Ω–∞–ª–∞..."
            class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black" />
        </div>

        <div class="mb-4">
          <h3 class="text-md font-semibold mb-2 –∞text-gray-800">–í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</h3>
          <select id="categorySelect"
              class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black bg-white">
              <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
          </select>
        </div>
        <div class="mb-4">
          <h3 class="text-md font-semibold mb-2 text-gray-800">–ò—Å–∫–ª—é—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–æ—Ç–º–µ—Ç—å—Ç–µ, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å)</h3>
          <div id="categoryFilter" class="flex flex-wrap gap-2 p-2 bg-gray-50">
            </div>
        </div>
        
        <div class="text-center mb-4 text-xl font-bold text-red-600">
          –ö–ê–ù–ê–õ–û–í –í –°–ü–ò–°–ö–ï: <span id="channelCounter">0</span>
        </div>
      </div>
      
      <div id="listPanel" class="w-full md:w-3/5 md:max-h-[80vh] md:overflow-y-auto md:p-2">
        <div id="channelList" class="space-y-2"></div>
      </div>
    </div>
    
  </div>
  
  <div id="uploadModal"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-20">
    <div class="bg-white rounded-3xl p-6 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
      <h2 class="text-xl font-semibold mb-6 text-gray-800">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞</h2>

      <div id="dropAreaModal" class="p-4 rounded-2xl border-2 border-transparent transition">
          <button id="uploadModalBtn"
            class="bg-black text-white text-lg font-semibold px-6 py-3 rounded-2xl shadow-lg hover:bg-gray-900 transition w-full mx-auto mb-4">
            –ó–ê–ì–†–£–ó–ò–¢–¨ –§–ê–ô–õ
          </button>
          
          <div class="my-4 text-gray-600 hidden">–∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞</div>
          
          <div class="flex flex-col gap-3 w-full mx-auto mb-4">
            <input type="text" id="urlModalInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ m3u —Ñ–∞–π–ª"
              class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-lg shadow-inner">
            
            <button id="loadUrlModalBtn"
              class="w-full bg-black text-white text-lg font-semibold px-6 py-3 rounded-2xl shadow-lg hover:bg-gray-900 transition">
              –í–ü–ï–†–ï–î
            </button>
          </div>
      </div>
      <div id="loadingModal" class="hidden text-blue-600 mt-4">
        <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"></div>
        –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...
      </div>

      <button id="closeUploadModal"
        class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition mt-4">
        –û–¢–ú–ï–ù–ê
      </button>
    </div>
  </div>

  <div id="registrationModal"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-20">
    <div class="bg-white rounded-3xl p-4 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
      
      <h2 class="text-2xl font-extrabold text-center mb-4 text-gray-800">
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üé∂
      </h2>
      <p class="text-center text-gray-600 mb-4 text-sm">
        –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã.
      </p>

      <button id="registerGoogleBtn"
        class="w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 text-base font-medium px-4 py-2 rounded-xl shadow-sm hover:bg-gray-100 transition mb-3">
        <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12.0003 4.75C14.7173 4.75 16.9833 5.772 18.6673 7.359L20.5903 5.487C18.3143 3.498 15.3623 2.25 12.0003 2.25C8.01332 2.25 4.54932 4.53 2.87132 7.824L5.87532 10.125C6.73632 7.787 9.12632 6.25 12.0003 6.25C13.8823 6.25 15.6173 6.942 16.9803 8.167L19.4583 6.135C18.0493 4.904 16.1433 4.25 14.2503 4.25H12.0003V4.75Z" fill="#EA4335"/>
          <path d="M12.0003 17.75C13.2133 17.75 14.3723 17.419 15.3853 16.829L18.3903 19.13C16.6383 20.375 14.3763 21 12.0003 21C7.81732 21 4.28832 18.577 2.50232 15.111L5.53732 12.83C6.34732 15.309 9.07332 17 12.0003 17V17.75Z" fill="#34A853"/>
          <path d="M21.2503 12C21.2503 11.234 21.1813 10.493 21.0543 9.774H12.0003V14.25H17.2273C17.0673 15.186 16.5183 15.996 15.7503 16.591L18.7853 18.868C20.4433 17.375 21.2503 15.342 21.2503 13.007V12Z" fill="#4285F4"/>
          <path d="M5.87532 10.125L2.87132 7.824C2.26132 9.068 2.00032 10.493 2.00032 12C2.00032 13.507 2.26132 14.932 2.87132 16.176L5.87532 13.875V10.125Z" fill="#FBBC05"/>
        </svg>
        –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
      </button>
      
      <div class="flex items-center my-4">
        <div class="flex-grow border-t border-gray-300"></div>
        <span class="flex-shrink mx-4 text-gray-500 text-sm">–∏–ª–∏</span>
        <div class="flex-grow border-t border-gray-300"></div>
      </div>

      <form id="registrationFormElement">
        <div class="mb-3">
          <label for="reg-email" class="block text-xs font-medium text-gray-700 mb-1 text-left">
            Email
          </label>
          <input type="email" id="reg-email" placeholder="example@mail.com" required
            class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-base shadow-inner">
        </div>

        <div class="mb-4">
          <label for="reg-password" class="block text-xs font-medium text-gray-700 mb-1 text-left">
            –ü–∞—Ä–æ–ª—å
          </label>
          <input type="password" id="reg-password" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å" required
            class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-base shadow-inner">
        </div>

        <button type="submit" id="registerEmailBtn"
          class="w-full bg-black text-white text-base font-semibold px-6 py-2 rounded-xl shadow-lg hover:bg-gray-900 transition mb-3">
          –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø
        </button>
      </form>
      
      <p class="text-center text-xs text-gray-600">
        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? 
        <a href="#" id="loginLink" class="text-black font-semibold hover:text-gray-700 transition">–í–æ–π—Ç–∏</a>
      </p>

      <button id="closeRegisterModal"
        class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition mt-3">
        –û–¢–ú–ï–ù–ê
      </button>

    </div>
  </div>
  <div id="saveModal"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-20">
    <div class="bg-white rounded-3xl p-6 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
      <h2 id="finalFileName" class="text-2xl font-bold mb-6">–§–ê–ô–õ 0 –ö–ê–ù–ê–õ–û–í</h2>

      <div id="dynamicLinkContainer" class="mb-6 p-4 bg-gray-100 rounded-xl text-left">
          <h3 class="text-sm font-bold text-gray-800 mb-2">–í–∞—à–∞ –ö–æ—Ä–æ—Ç–∫–∞—è –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –°—Å—ã–ª–∫–∞</h3>
          <div id="shortLinkLoader" class="text-center text-blue-600 mb-2 hidden">
              <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mx-auto mb-1"></div>
              –°–æ–∫—Ä–∞—â–∞—é...
          </div>
          <input type="text" id="dynamicPlaylistLink" readonly
            class="w-full text-sm font-mono p-2 border border-gray-300 rounded-lg bg-white truncate">
          <button id="copyLinkBtn"
            class="w-full mt-2 bg-blue-600 text-white font-medium py-1 rounded-lg transition hover:bg-blue-700 text-sm">
            –ö–û–ü–ò–†–û–í–ê–¢–¨ –°–°–´–õ–ö–£
          </button>
      </div>
      <button id="downloadBtn"
        class="w-full bg-black text-white font-medium py-2 rounded-xl transition hover:bg-gray-800 mb-2">
        –°–ö–ê–ß–ê–¢–¨ –õ–û–ö–ê–õ–¨–ù–û
      </button>
      <button id="closeSaveModal"
        class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition">
        –ó–ê–ö–†–´–¢–¨
      </button>
    </div>
  </div>
  
  <div id="toastNotification" class="fixed bottom-5 right-5 bg-green-600 text-white px-4 py-3 rounded-xl shadow-lg hidden animate-fade-in z-50">
    –ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–≥—Ä—É–∂–µ–Ω. –ö–∞–Ω–∞–ª–æ–≤: <span id="toastChannelCount" class="font-bold">0</span>
  </div>

  <div id="globalLoader" class="fixed inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
    <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-white mb-4"></div>
    <p class="text-white text-xl font-semibold">–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞...</p>
  </div>


  <script type="module">
    // =======================================================
    // FIREBASE INITIALIZATION AND AUTH
    // =======================================================
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { 
        getAuth, 
        signInAnonymously, 
        signInWithCustomToken, 
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword, // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—Ö–æ–¥–∞
        GoogleAuthProvider,
        signInWithPopup,
        signOut,
        onAuthStateChanged 
    } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Å —É—á–µ—Ç–æ–º –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Canvas
    const providedFirebaseConfig = {
      apiKey: "AIzaSyCko3aktIDmXWbsDekdr-dKUscX2fkRpjo",
      authDomain: "read24-7.firebaseapp.com",
      projectId: "read24-7",
      storageBucket: "read24-7.firebasestorage.app",
      messagingSenderId: "966949567813",
      appId: "1:966949567813:web:b12ff4001282d20c29922c",
      measurementId: "G-NVEC5F7S8F"
    };

    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : JSON.stringify(providedFirebaseConfig));
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    
    let userId = 'guest';

    // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    async function initializeAuth() {
        try {
            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                await signInWithCustomToken(auth, __initial_auth_token);
                // console.log("Signed in with custom token.");
            } else {
                await signInAnonymously(auth);
                // console.log("Signed in anonymously.");
            }
        } catch (error) {
            console.error("Auth initialization failed:", error.message);
        }
    }

    // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ê –õ–û–ì–ò–ö–ê –î–õ–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò –° –ü–ï–†–ï–•–û–î–û–ú –í –†–ï–î–ê–ö–¢–û–†
    onAuthStateChanged(auth, (user) => {
        const isAuthenticated = user && !user.isAnonymous;
        
        // 1. –°–∫—Ä—ã–≤–∞–µ–º/–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
        if (!isAuthenticated) {
            // –ì–æ—Å—Ç—å:
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –ª–∏—à–Ω–µ–µ
            unauthenticatedMessage.classList.add('hidden'); 
            authButtonContainer.classList.add('hidden');
            editorScreen.classList.add('hidden');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω 
            mainScreen.classList.remove('hidden');
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ —à–∞–ø–∫–µ
            openRegisterModalBtn.classList.remove('hidden'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "–í–û–ô–¢–ò / –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø"
            logoutBtn.classList.add('hidden');
            userId = 'guest';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:
            // –í—Å–µ –±–ª–æ–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∏–¥–∏–º—ã (–¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏)
            if (heroBlock) {
                 heroBlock.classList.remove('hidden');
            }
            if (whyUsBlock) { 
                 whyUsBlock.classList.remove('hidden');
            }
            if (howItWorksBlock) { 
                 howItWorksBlock.classList.remove('hidden');
            }
            if (comparisonBlock) { 
                 comparisonBlock.classList.remove('hidden');
            }
            if (faqBlock) { 
                 faqBlock.classList.remove('hidden');
            }
            
        } else {
            // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª:
            // –°–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ –≤—Å–µ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            mainScreen.classList.add('hidden'); 
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä
            editorScreen.classList.remove('hidden');
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ —à–∞–ø–∫–µ
            openRegisterModalBtn.classList.add('hidden'); // –°–∫—Ä—ã–≤–∞–µ–º "–í–û–ô–¢–ò / –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø"
            logoutBtn.classList.remove('hidden'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "–í–´–ô–¢–ò"
            userId = user.uid; 
        }
    });

    initializeAuth();

    // =======================================================
    // REGISTRATION AND LOGOUT FUNCTIONS
    // =======================================================
    
    // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥–∞ –ø–æ Email/–ü–∞—Ä–æ–ª—é
    async function handleEmailSignIn(email, password) {
        try {
            await signInWithEmailAndPassword(auth, email, password);
            showToast("–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å.");
            registrationModal.classList.add('hidden');
            return true;
        } catch (error) {
            let errorMessage = "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞. –ù–µ–≤–µ—Ä–Ω—ã–π Email –∏–ª–∏ –ø–∞—Ä–æ–ª—å.";
            if (error.code === 'auth/user-not-found') {
                errorMessage = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º Email –Ω–µ –Ω–∞–π–¥–µ–Ω.";
            } else if (error.code === 'auth/wrong-password') {
                errorMessage = "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å.";
            } else if (error.code === 'auth/invalid-email') {
                errorMessage = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Email.";
            } else {
                errorMessage = `–û—à–∏–±–∫–∞: ${error.message}`;
            }
            showToast(errorMessage);
            console.error("Email sign-in error:", error.code, error.message);
            return false;
        }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞
    async function handleEmailRegistration(e) {
        e.preventDefault();
        const email = document.getElementById('reg-email').value;
        const password = document.getElementById('reg-password').value;
        
        if (!email || !password) {
            showToast("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.");
            return;
        }

        try {
            // –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            await createUserWithEmailAndPassword(auth, email, password);
            showToast("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í—ã –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É.");
            registrationModal.classList.add('hidden');
        } catch (error) {
            // –ï—Å–ª–∏ Email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø—Ä–æ–±—É–µ–º –≤–æ–π—Ç–∏
            if (error.code === 'auth/email-already-in-use') {
                showToast("Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω. –ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞...");
                await handleEmailSignIn(email, password);
            } else {
                let errorMessage = "–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.";
                switch (error.code) {
                    case 'auth/invalid-email':
                        errorMessage = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Email.";
                        break;
                    case 'auth/weak-password':
                        errorMessage = "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.";
                        break;
                    default:
                        errorMessage = `–û—à–∏–±–∫–∞: ${error.message}`;
                }
                showToast(errorMessage);
                console.error("Email registration error:", error.code, error.message);
            }
        }
    }

    async function handleGoogleRegistration() {
        const provider = new GoogleAuthProvider();
        try {
            await signInWithPopup(auth, provider);
            showToast("–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google —É—Å–ø–µ—à–µ–Ω!");
            registrationModal.classList.add('hidden');
        } catch (error) {
            let errorMessage = "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google.";
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (popup-closed-by-user)
            if (error.code === 'auth/popup-closed-by-user') {
                errorMessage = "–û–∫–Ω–æ –≤—Ö–æ–¥–∞ –±—ã–ª–æ –∑–∞–∫—Ä—ã—Ç–æ.";
            } else {
                errorMessage = `–û—à–∏–±–∫–∞: ${error.message}`;
            }
            showToast(errorMessage);
            console.error("Google sign-in error:", error.code, error.message);
        }
    }
    
    async function handleLogout() {
        try {
            await signOut(auth);
            // onAuthStateChanged –æ–±–Ω–æ–≤–∏—Ç UI –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è "–ì–æ—Å—Ç—å"
            showToast("–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.");
        } catch (error) {
            console.error("Logout error:", error.message);
            showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ.");
        }
    }

    // =======================================================
    // EXISTING SCRIPT LOGIC BELOW
    // =======================================================
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const urlInput = document.getElementById('urlInput');
    const loadUrlBtn = document.getElementById('loadUrlBtn');
    const loading = document.getElementById('loading');
    const saveModal = document.getElementById('saveModal');
    const channelCounter = document.getElementById('channelCounter');
    const finalFileName = document.getElementById('finalFileName');
    const downloadBtn = document.getElementById('downloadBtn');
    const closeSaveModal = document.getElementById('closeSaveModal');
    const mainScreen = document.getElementById('mainScreen');
    const editorScreen = document.getElementById('editorScreen');
    const channelList = document.getElementById('channelList');
    const saveBtn = document.getElementById('saveBtn');
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter'); 
    const removeDuplicatesBtn = document.getElementById('removeDuplicatesBtn'); 
    const dropArea = document.getElementById('dropArea');
    const categorySelect = document.getElementById('categorySelect'); 
    
    const uploadModal = document.getElementById('uploadModal');
    const openUploadModalBtn = document.getElementById('openUploadModalBtn');
    const closeUploadModal = document.getElementById('closeUploadModal');
    const uploadModalBtn = document.getElementById('uploadModalBtn');
    const urlModalInput = document.getElementById('urlModalInput');
    const loadUrlModalBtn = document.getElementById('loadUrlModalBtn');
    const loadingModal = document.getElementById('loadingModal');
    const dropAreaModal = document.getElementById('dropAreaModal'); 
    
    const toastNotification = document.getElementById('toastNotification');
    const toastChannelCount = document.getElementById('toastChannelCount');

    const globalLoader = document.getElementById('globalLoader');

    // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò/–ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò
    const registrationModal = document.getElementById('registrationModal');
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫—É –≤ —à–∞–ø–∫–µ
    const openRegisterModalBtnHeader = document.getElementById('openRegisterModalBtnHeader'); 
    const openRegisterModalBtn = openRegisterModalBtnHeader; // –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞–µ–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    const closeRegisterModal = document.getElementById('closeRegisterModal');
    const registerEmailBtn = document.getElementById('registerEmailBtn');
    const registerGoogleBtn = document.getElementById('registerGoogleBtn');
    const registrationFormElement = document.getElementById('registrationFormElement');
    const loginLink = document.getElementById('loginLink'); // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É "–í–æ–π—Ç–∏"
    
    const unauthenticatedMessage = document.getElementById('unauthenticatedMessage');
    const authButtonContainer = document.getElementById('authButtonContainer');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
    const dynamicPlaylistLink = document.getElementById('dynamicPlaylistLink');
    const copyLinkBtn = document.getElementById('copyLinkBtn');
    const shortLinkLoader = document.getElementById('shortLinkLoader');

    // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
    const heroBlock = document.getElementById('heroBlock'); 
    const whyUsBlock = document.getElementById('whyUsBlock'); 
    const howItWorksBlock = document.getElementById('howItWorksBlock'); 
    const comparisonBlock = document.getElementById('comparisonBlock');
    const faqBlock = document.getElementById('faqBlock');
    const knowledgeBaseBlock = document.getElementById('knowledgeBaseBlock'); // –ù–æ–≤—ã–π –±–ª–æ–∫
    const goToWhyUsBtn = document.getElementById('goToWhyUsBtn'); 
    const startEditingBtn = document.getElementById('startEditingBtn'); 
    const registerNowBtn = document.getElementById('registerNowBtn'); 
    const registerNowCardBtn = document.getElementById('registerNowCardBtn');
    const startNoRegBtn = document.getElementById('startNoRegBtn');
    const dynamicTitlePart = document.getElementById('dynamicTitlePart');
    const menuButton = document.getElementById('menuButton'); // –ö–Ω–æ–ø–∫–∞ –≥–∞–º–±—É—Ä–≥–µ—Ä–∞
    const siteMenu = document.getElementById('siteMenu'); // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    const knowledgeBaseLink = document.getElementById('knowledgeBaseLink'); // –°—Å—ã–ª–∫–∞ –Ω–∞ –ë–∞–∑—É –∑–Ω–∞–Ω–∏–π
    const freePlaylistsLink = document.getElementById('freePlaylistsLink'); // –°—Å—ã–ª–∫–∞ –Ω–∞ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã
    // –ö–û–ù–ï–¶ –ù–û–í–´–• –ü–ï–†–ï–ú–ï–ù–ù–´–•

    let originalLines = [];
    let channels = [];
    let allCategories = new Set();
    let excludedCategories = new Set(); 
    let editedContent = ''; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    let categoryChannelCounts = {}; 
    
    const FAVORITE_CATEGORY = '–ò–ó–ë–†–ê–ù–ù–û–ï'; 
    const DISPLAY_FAVORITE_CATEGORY = '‚ú®–ò–ó–ë–†–ê–ù–ù–û–ï‚ú®'; 
    
    // ===============================
    // –õ–û–ì–ò–ö–ê –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ì–û –¢–ï–ö–°–¢–ê
    // =======================================================
    const dynamicPhrases = [
        '–≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞', 
        '–ª—é–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤', 
        '–±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞', 
        '–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞', 
        '–ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è'
    ];
    let currentPhraseIndex = 0;

    function updateDynamicTitle() {
        if (dynamicTitlePart) {
            // 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
            dynamicTitlePart.textContent = dynamicPhrases[currentPhraseIndex];
            
            // 2. –°–±—Ä–æ—Å –∞–Ω–∏–º–∞—Ü–∏–∏ (–≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
            dynamicTitlePart.classList.remove('dynamic-text-animated');
            // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–π —Ç–∞–π–º–∞—É—Ç
            void dynamicTitlePart.offsetWidth; // Force reflow
            dynamicTitlePart.classList.add('dynamic-text-animated'); 
            
            // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
            currentPhraseIndex = (currentPhraseIndex + 1) % dynamicPhrases.length;
        }
    }

    // –ó–∞–ø—É—Å–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    if (dynamicTitlePart) {
        updateDynamicTitle(); // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
        setInterval(updateDynamicTitle, 2000); 
    }
    // =======================================================

    // ===============================
    // –õ–û–ì–ò–ö–ê DRAG AND DROP
    // =======================================================
    const dragDropAreas = [dropArea, dropAreaModal];

    dragDropAreas.forEach(area => {
        if (area) {
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                area.removeEventListener(eventName, preventDefaults, false);
            });
            document.body.removeEventListener('dragover', preventDefaults, false); 
            document.body.removeEventListener('drop', preventDefaults, false);
            ['dragenter', 'dragover'].forEach(eventName => {
                area.removeEventListener(eventName, highlight, false);
            });
            ['dragleave', 'drop'].forEach(eventName => {
                area.removeEventListener(eventName, unhighlight, false);
            });
            area.removeEventListener('drop', handleDrop, false);
        }
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    function highlight(e) {
      // e.currentTarget.classList.add('drag-over'); 
    }

    function unhighlight(e) {
      // e.currentTarget.classList.remove('drag-over'); 
    }

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      if (files.length > 0) {
        handleFiles(files);
      }
    }

    function handleFiles(files) {
        const file = files[0];
        if (!file) return;
        fileInput.files = files;
        fileInput.dispatchEvent(new Event('change'));
    }
    
    // ===============================
    // –§–£–ù–ö–¶–ò–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
    // =======================================================
    function showToast(message, count = null) {
        toastChannelCount.classList.add('hidden');
        toastNotification.classList.remove('bg-green-600', 'bg-red-600'); 
        
        if (count !== null) {
            toastChannelCount.textContent = count;
            toastNotification.innerHTML = `–ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–≥—Ä—É–∂–µ–Ω. –ö–∞–Ω–∞–ª–æ–≤: <span class="font-bold">${count}</span>`;
            toastNotification.classList.add('bg-green-600'); 
        } else {
            toastNotification.textContent = message;
            if (message.includes('–û—à–∏–±–∫–∞') || message.includes('–ù–µ —É–¥–∞–ª–æ—Å—å') || message.includes('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞') || message.includes('Email') || message.includes('–ü–∞—Ä–æ–ª—å') || message.includes('–ù–µ–≤–µ—Ä–Ω—ã–π')) {
                 toastNotification.classList.add('bg-red-600'); 
            } else {
                 toastNotification.classList.add('bg-green-600');
            }
        }
        
        toastNotification.classList.remove('hidden');
        toastNotification.classList.add('animate-fade-in');

        setTimeout(() => {
            toastNotification.classList.add('hidden');
            toastNotification.classList.remove('animate-fade-in');
        }, 3000);
    }
    
    // ===============================
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
    // =======================================================
    // uploadBtn.addEventListener('click', ...); - —É–¥–∞–ª–µ–Ω

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ fileInput –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º
    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (!file) {
          // –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω, –æ—Å—Ç–∞–µ–º—Å—è –Ω–∞ mainScreen
          return;
      }
    
      globalLoader.classList.remove('hidden');
    
      setTimeout(() => {
        const reader = new FileReader();
        reader.onload = function (e) {
          const content = e.target.result;
          processPlaylistContent(content);
        };
        reader.readAsText(file);
      }, 50);
    });

    // loadUrlBtn.addEventListener('click', ...); - —É–¥–∞–ª–µ–Ω
    
    openUploadModalBtn.addEventListener('click', () => {
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        uploadModal.classList.remove('hidden');
    });

    uploadModalBtn.addEventListener('click', () => {
        // –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –≤ –º–æ–¥–∞–ª–∫–µ, –≤—ã–∑—ã–≤–∞–µ–º fileInput
        fileInput.click();
    });
    
    loadUrlModalBtn.addEventListener('click', async () => {
      const url = urlModalInput.value.trim();
      // –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      await loadPlaylistFromUrl(url, loadingModal, loadUrlModalBtn);
    });

    closeUploadModal.addEventListener('click', () => {
        uploadModal.classList.add('hidden');
    });
    
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ô –°–°–´–õ–ö–ò
    copyLinkBtn.addEventListener('click', () => {
        const link = dynamicPlaylistLink.value;
        navigator.clipboard.writeText(link).then(() => {
            showToast("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
        }).catch(err => {
            console.error('Could not copy text: ', err);
            showToast("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.");
        });
    });


    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
    if (openRegisterModalBtn) {
        openRegisterModalBtn.addEventListener('click', () => {
            registrationModal.classList.remove('hidden');
        });
    }

    if (closeRegisterModal) {
        closeRegisterModal.addEventListener('click', () => {
            registrationModal.classList.add('hidden');
        });
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å—Å—ã–ª–∫–∏ "–í–æ–π—Ç–∏"
    if (loginLink) {
        loginLink.addEventListener('click', (e) => {
            e.preventDefault();
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            if (email && password) {
                handleEmailSignIn(email, password);
            } else {
                showToast("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ Email –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞.");
            }
        });
    }

    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—ã—Ö–æ–¥–∞
    registrationFormElement.addEventListener('submit', handleEmailRegistration);
    registerGoogleBtn.addEventListener('click', handleGoogleRegistration);
    document.getElementById('logoutBtn').addEventListener('click', handleLogout); 
    
    // –ù–û–í–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö: –ö–Ω–æ–ø–∫–∞ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ
    if (registerNowBtn) {
        registerNowBtn.addEventListener('click', () => {
             registrationModal.classList.remove('hidden');
        });
    }
    // –ù–û–í–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö: –ö–Ω–æ–ø–∫–∞ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ
    if (registerNowCardBtn) {
        registerNowCardBtn.addEventListener('click', () => {
             registrationModal.classList.remove('hidden');
        });
    }
    
    // –î–û–ë–ê–í–õ–ï–ù–ê –õ–û–ì–ò–ö–ê –ê–ö–ö–û–†–î–ï–û–ù–ê –î–õ–Ø FAQ
    window.toggleFaq = function(element) {
        const isExpanded = element.getAttribute('aria-expanded') === 'true';
        
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ
        document.querySelectorAll('.faq-item[aria-expanded="true"]').forEach(item => {
            if (item !== element) {
                item.setAttribute('aria-expanded', 'false');
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
        element.setAttribute('aria-expanded', !isExpanded);
    }
    
    // –õ–û–ì–ò–ö–ê –ì–ê–ú–ë–£–†–ì–ï–†–ê (–†–ê–°–ö–†–´–¢–ò–ï/–°–ö–†–´–¢–ò–ï)
    if (menuButton && siteMenu) {
        menuButton.addEventListener('click', () => {
            siteMenu.classList.toggle('open');
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ —Å—Å—ã–ª–∫–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
        document.querySelectorAll('#siteMenu .menu-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 640) {
                     siteMenu.classList.remove('open');
                }
            });
        });
    }

    // –£–î–ê–õ–ï–ù–ê –õ–û–ì–ò–ö–ê showKnowledgeBase, —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ —è–∫–æ—Ä—é.
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã" (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –Ω–∞–≤–µ—Ä—Ö, —Ç–∞–∫ –∫–∞–∫ –±–ª–æ–∫–∞ –Ω–µ—Ç)
    if (freePlaylistsLink) {
        freePlaylistsLink.addEventListener('click', (e) => {
            e.preventDefault();
            // –ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            console.log("–ö–ª–∏–∫ –ø–æ '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã'.");
        });
    }
    
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–ù–û–ü–û–ö –ù–ê –ì–õ–ê–í–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï (–±–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è)
    if (goToWhyUsBtn) {
        goToWhyUsBtn.addEventListener('click', (e) => {
            e.preventDefault(); 
        });
    }
    
    if (startEditingBtn) {
        startEditingBtn.addEventListener('click', (e) => {
            e.preventDefault();
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ "–ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"
    if (startNoRegBtn) {
        startNoRegBtn.addEventListener('click', (e) => {
             e.preventDefault();
             // –í —ç—Ç–æ–º –º–µ—Å—Ç–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞.
             // –¢–∞–∫ –∫–∞–∫ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ—Ç, –æ—Å—Ç–∞–≤–ª—è–µ–º –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.
             console.log("–ù–∞—á–∞—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.");
        });
    }
    // –ö–û–ù–ï–¶ –ù–û–í–´–• –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í (–ö–ù–û–ü–ö–ò –ë–ï–ó –î–ï–ô–°–¢–í–ò–Ø)

    async function loadPlaylistFromUrl(url, loadingElement, buttonElement) {
        if (!url) {
            showToast('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É');
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –ø–æ URL
        if (auth.currentUser?.isAnonymous) {
            showToast("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç.");
            registrationModal.classList.remove('hidden');
            return;
        }

        loadingElement.classList.remove('hidden');
        buttonElement.disabled = true;

        try {
            // –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–¥–µ—Ç –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞, —Å–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ
            if (loadingElement === loadingModal) {
                dropAreaModal.classList.add('hidden');
            }

            const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
            const response = await fetch(proxyUrl);
            
            if (!response.ok) {
                throw new Error(`–û—à–∏–±–∫–∞ HTTP: ${response.status}`);
            }
            
            loadingElement.classList.add('hidden');
            const content = await response.text();

            globalLoader.classList.remove('hidden');

            setTimeout(() => {
                processPlaylistContent(content);
            }, 50);

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
            showToast('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª. –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å CORS –∏–ª–∏ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.');
            loadingElement.classList.add('hidden');
        } finally {
            buttonElement.disabled = false;
        }
    }

    function processPlaylistContent(content) {
        // –ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º originalLines —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–æ–∫,
        // –Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ –º–∞—Å—Å–∏–≤ channels
        originalLines = content.split('\n'); 
        
        parseChannelsAsync()
            .then(() => {
                globalLoader.classList.add('hidden');
                loadingModal.classList.add('hidden');
                dropAreaModal.classList.remove('hidden');
                uploadModal.classList.add('hidden');

                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω—ã: –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä—ã–≤–∞–µ–º, —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
                mainScreen.classList.add('hidden');
                editorScreen.classList.remove('hidden');
                
                excludedCategories.clear(); 
                renderCategoryFilter();
                renderCategorySelect();
                categorySelect.value = ""; 
                updateCounter(channels.length); 
                renderChannelList();

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º SortableJS –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
                initializeSortable();

                showToast('–ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–≥—Ä—É–∂–µ–Ω.', channels.length);
            })
            .catch(error => {
                globalLoader.classList.add('hidden');
                loadingModal.classList.add('hidden');
                dropAreaModal.classList.remove('hidden');
                showToast('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞: ' + error.message);
                
                // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                mainScreen.classList.remove('hidden');
                editorScreen.classList.add('hidden');
            });
    }
    
    // =======================================================
    // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò SORTABLEJS
    // =======================================================
    function initializeSortable() {
        if (!channelList) return;

        // –ï—Å–ª–∏ Sortable —É–∂–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, —É–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å—Ç–∞—Ä—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
        if (channelList.sortableInstance) {
            channelList.sortableInstance.destroy();
        }

        channelList.sortableInstance = Sortable.create(channelList, {
            animation: 150,
            group: 'channels',
            handle: '.sortable-channel', // –ö–ª–∞—Å—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
            draggable: '.channel-item',
            onEnd: function (evt) {
                // evt.oldIndex –∏ evt.newIndex –æ—Ç–Ω–æ—Å—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–º—É/–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–º—É —Å–ø–∏—Å–∫—É.
                const oldIndex = evt.oldIndex;
                const newIndex = evt.newIndex;
                
                // –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
                const filteredChannels = getFilteredChannels(searchInput.value, categorySelect.value);

                if (oldIndex !== newIndex) {
                    // 1. –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç –∫–∞–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø–µ—Ä–µ–º–µ—â–µ–Ω
                    const movedChannel = filteredChannels[oldIndex];
                    
                    // 2. –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å —ç—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ `channels`
                    const oldChannelIndexInMainArray = channels.findIndex(c => c === movedChannel);

                    if (oldChannelIndexInMainArray === -1) {
                         // –ï—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.
                         return; 
                    }
                    
                    // 3. –í—ã—Ä–µ–∑–∞–µ–º –µ–≥–æ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
                    channels.splice(oldChannelIndexInMainArray, 1);

                    // 4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–Ω–∞–ª, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ (–∏–ª–∏ –ø–µ—Ä–µ–¥ –∫–æ—Ç–æ—Ä—ã–º) –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å
                    let targetChannel = filteredChannels[newIndex];
                    let newChannelIndexInMainArray;
                    
                    if (targetChannel) {
                        // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ü–µ–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ
                        const targetIndexInMainArray = channels.findIndex(c => c === targetChannel);
                        
                        // –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –≤–Ω–∏–∑, –≤—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ target, –∏–Ω–∞—á–µ - –ø–µ—Ä–µ–¥
                        newChannelIndexInMainArray = targetIndexInMainArray;
                    } else if (newIndex > oldIndex && filteredChannels.length > 0) {
                        // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–µ–Ω–æ –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ —Å–ø–∏—Å–∫–∞
                        newChannelIndexInMainArray = channels.length;
                    } else {
                        // –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–µ–Ω–æ –Ω–∞ 0-—é –ø–æ–∑–∏—Ü–∏—é
                         newChannelIndexInMainArray = 0;
                    }
                    
                    // 5. –í—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–Ω–∞–ª –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Å—Å–∏–≤ –ø–æ –Ω–æ–≤–æ–º—É –∏–Ω–¥–µ–∫—Å—É
                    channels.splice(newChannelIndexInMainArray, 0, movedChannel);
                    
                    // 6. –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã (–≤–∫–ª—é—á–∞—è —Å–∫—Ä—ã—Ç—ã–µ) –æ–±–Ω–æ–≤–ª–µ–Ω—ã
                    renderChannelList(searchInput.value);
                    initializeSortable(); // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sortable –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
                    showToast(`–ü–æ—Ä—è–¥–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω.`);
                }
            }
        });
    }

    function parseChannelsAsync() {
        return new Promise((resolve, reject) => {
            try {
                channels = [];
                allCategories.clear();
                categoryChannelCounts = {};

                const lines = originalLines;
                const totalLines = lines.length;
                let currentIndex = 0;
                const chunkSize = 1000;

                function processChunk() {
                    const limit = Math.min(currentIndex + chunkSize, totalLines);

                    for (let i = currentIndex; i < limit; i++) {
                        const line = lines[i].trim();

                        if (line.startsWith('#EXTINF')) {
                            const extinf = line;
                            const nameMatch = extinf.match(/,(.*)$/);
                            let name = nameMatch ? nameMatch[1].trim() : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª';
                            
                            let category = '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
                            const groupTitleMatch = extinf.match(/group-title="([^"]*)"/i);
                            if (groupTitleMatch) {
                                category = groupTitleMatch[1].trim();
                            }

                            let url = '';
                            let extgrp = '';
                            let urlIndex = i + 1;

                            while (urlIndex < lines.length) {
                                const nextLine = lines[urlIndex].trim();
                                if (nextLine.startsWith('#EXTGRP:')) {
                                    if (category === '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' || category === '') {
                                        category = nextLine.substring(8).trim();
                                    }
                                    extgrp = nextLine;
                                } else if (nextLine && !nextLine.startsWith('#')) {
                                    url = nextLine;
                                    break;
                                } else if (nextLine.startsWith('#EXTINF')) {
                                    break; 
                                }
                                urlIndex++;
                            }

                            if (url) {
                                channels.push({
                                    name, extinf, extgrp, url,
                                    startIndex: i,
                                    endIndex: urlIndex,
                                    category,
                                    isFavorite: false,
                                });
                                allCategories.add(category);
                                categoryChannelCounts[category] = (categoryChannelCounts[category] || 0) + 1;
                                i = urlIndex;
                            }
                        }
                    }

                    currentIndex = limit;

                    if (currentIndex < totalLines) {
                        setTimeout(processChunk, 0);
                    } else {
                        // –£–ë–†–ê–ù–ê –ü–ï–†–í–û–ù–ê–ß–ê–õ–¨–ù–ê–Ø –°–û–†–¢–ò–†–û–í–ö–ê –ü–û –ò–ú–ï–ù–ò.
                        resolve();
                    }
                }

                processChunk();
            } catch (error) {
                reject(error);
            }
        });
    }
    
    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    function getFilteredChannels(filter = '', selectedCategory = '') {
        let filteredChannels = channels;

        filteredChannels = filteredChannels.filter(entry => !excludedCategories.has(entry.category));

        if (selectedCategory === FAVORITE_CATEGORY) {
            filteredChannels = filteredChannels.filter(entry => entry.isFavorite);
        } else if (excludedCategories.has(FAVORITE_CATEGORY)) {
            filteredChannels = filteredChannels.filter(entry => !entry.isFavorite);
        }

        filteredChannels = filteredChannels
            .filter(entry => entry.name.toLowerCase().includes(filter.toLowerCase()))
            .filter(entry => !selectedCategory || selectedCategory === FAVORITE_CATEGORY || entry.category === selectedCategory);
            
        return filteredChannels;
    }

    function getFavoriteCount() { 
        return channels.filter(c => c.isFavorite).length;
    }

    function renderCategoryFilter() {
      categoryFilter.innerHTML = '';
      const sortedCategories = Array.from(allCategories).sort();

      const favoriteCount = getFavoriteCount(); 
      
      if (favoriteCount > 0 || excludedCategories.has(FAVORITE_CATEGORY)) {
          sortedCategories.unshift(FAVORITE_CATEGORY);
          categoryChannelCounts[FAVORITE_CATEGORY] = favoriteCount;
      }

      sortedCategories.forEach(category => {
        const container = document.createElement('label');
        container.className = 'flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow-sm cursor-pointer hover:bg-gray-100 transition text-sm';

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'form-checkbox h-4 w-4 text-black rounded border-gray-300 focus:ring-0';
        checkbox.value = category;
        checkbox.checked = excludedCategories.has(category);
        
        checkbox.addEventListener('change', (e) => {
          if (e.target.checked) {
            excludedCategories.add(category);
          } else {
            excludedCategories.delete(category);
          }
          renderChannelList(searchInput.value); 
          initializeSortable(); // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sortable –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞
        });

        const span = document.createElement('span');
        const count = categoryChannelCounts[category] || 0;
        span.className = 'text-gray-800 truncate max-w-[150px]';
        span.innerHTML = `${category} (<span class="text-red-600 font-bold">${count}</span>)`;

        container.appendChild(checkbox);
        container.appendChild(span);
        categoryFilter.appendChild(container);
      });
    }
    
    function renderCategorySelect() {
        categorySelect.innerHTML = '<option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>';
        const sortedCategories = Array.from(allCategories).sort();
        
        const favoriteCount = getFavoriteCount(); 
        
        if (favoriteCount > 0) { 
             sortedCategories.unshift(FAVORITE_CATEGORY);
             categoryChannelCounts[FAVORITE_CATEGORY] = favoriteCount;
        }

        sortedCategories.forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            const count = categoryChannelCounts[category] || 0;
            option.textContent = `${category} (${count})`;
            categorySelect.appendChild(option);
        });
    }

    categorySelect.addEventListener('change', () => {
        renderChannelList(searchInput.value);
        initializeSortable(); // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sortable –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞
    });

    function downloadSingleChannel(entry) {
      let playlistContent = `#EXTM3U\n`;
      
      let extinfLine = entry.extinf;
      
      playlistContent += `${extinfLine}\n`;
      
      if (entry.extgrp) {
        playlistContent += `${entry.extgrp}\n`;
      }
      playlistContent += `${entry.url}`;

      const blob = new Blob([playlistContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${entry.name.replace(/[^a-zA-Z0-9–∞-—è–ê-–Ø]/g, '_')}.m3u`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function toggleFavorite(entry) {
        entry.isFavorite = !entry.isFavorite; 

        renderCategoryFilter();
        renderCategorySelect();
        renderChannelList(searchInput.value);
        initializeSortable(); // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Sortable –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        
        const action = entry.isFavorite ? '–¥–æ–±–∞–≤–ª–µ–Ω –≤' : '—É–¥–∞–ª–µ–Ω –∏–∑';
        showToast(`–ö–∞–Ω–∞–ª "${entry.name}" ${action} –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.`);
    }
    
    function renderChannelList(filter = '') {
      channelList.innerHTML = '';
      
      const isMobile = window.matchMedia('(max-width: 640px)').matches;
      const downloadButtonText = isMobile ? '–°–∫–∞—á–∞—Ç—å' : '–°–∫–∞—á–∞—Ç—å –∫–∞–Ω–∞–ª';
      
      const selectedCategory = categorySelect.value; 
      
      let filteredChannels = getFilteredChannels(filter, selectedCategory);

      updateCounter(filteredChannels.length); 
        
      filteredChannels.forEach((entry) => {
          const item = document.createElement('div');
          // –î–û–ë–ê–í–õ–ï–ù sortable-channel –∫–ª–∞—Å—Å –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
          item.className = 'channel-item flex items-center justify-between bg-gray-100 px-4 py-2 rounded-xl shadow sortable-channel'; 
          item.dataset.channelUrl = entry.url; // –ò—Å–ø–æ–ª—å–∑—É–µ–º URL –∫–∞–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π (—Ö–æ—Ç—å –∏ –Ω–µ –≤—Å–µ–≥–¥–∞) –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
          item.dataset.channelName = entry.name; // –î–æ–±–∞–≤–ª—è–µ–º –∏–º—è –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
          
          const name = document.createElement('span');
          name.className = 'channel-name text-black font-medium truncate max-w-[60%] md:max-w-[70%]'; 
          name.textContent = entry.name;

          const favBtn = document.createElement('button');
          const starColor = entry.isFavorite ? 'text-yellow-500 hover:text-yellow-400' : 'text-gray-400 hover:text-yellow-500';
          favBtn.className = `channel-favorite-btn ${starColor} font-semibold text-xl px-2 py-1 transition flex-shrink-0`;
          favBtn.innerHTML = '‚òÖ'; 
          favBtn.title = entry.isFavorite ? '–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ' : '–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ';
          favBtn.onclick = () => toggleFavorite(entry);


          const downloadBtn = document.createElement('button');
          downloadBtn.className = 'channel-download-btn bg-green-600 hover:bg-green-500 text-white font-semibold text-sm px-3 py-1 rounded-lg transition';
          downloadBtn.textContent = downloadButtonText;
          downloadBtn.onclick = () => downloadSingleChannel(entry);

          const delBtn = document.createElement('button');
          delBtn.className = 'channel-delete-btn text-red-600 hover:text-red-500 font-semibold text-sm';
          delBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
          
          // **********************************************
          // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–ê–î–ï–ñ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ö–ê–ù–ê–õ–ê –ò–ó –ú–ê–°–°–ò–í–ê
          // **********************************************
          delBtn.onclick = () => {
            const indexToDelete = channels.findIndex(c => c === entry);
            
            if (indexToDelete !== -1) {
              // –£–¥–∞–ª—è–µ–º –∫–∞–Ω–∞–ª –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ channels
              channels.splice(indexToDelete, 1); 
              
              // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ UI-—ç–ª–µ–º–µ–Ω—Ç—ã
              renderCategoryFilter();
              renderCategorySelect(); 
              renderChannelList(searchInput.value); 
              initializeSortable(); 
              showToast(`–ö–∞–Ω–∞–ª "${entry.name}" —É–¥–∞–ª–µ–Ω.`);
            }
            
            // –í–∞–∂–Ω–æ: originalLines –±–æ–ª—å—à–µ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–∞–Ω–∞–ª–∞.
            // –û–Ω –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞.
          };
          // **********************************************

          const buttonContainer = document.createElement('div');
          buttonContainer.className = 'channel-buttons-container flex items-center gap-2 flex-shrink-0';
          
          buttonContainer.appendChild(favBtn); 
          buttonContainer.appendChild(downloadBtn);
          buttonContainer.appendChild(delBtn);

          item.appendChild(name);
          item.appendChild(buttonContainer);
          channelList.appendChild(item);
        });
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º parseChannelsSync, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∞, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —É–¥–∞–ª–µ–Ω–∏–µ.
    function parseChannelsSync(maintainOrder = false) {
      // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π
      const tempFavoriteMap = {};
      channels.forEach(c => {
        if (c.isFavorite) {
            tempFavoriteMap[c.url + c.name] = true; 
        }
      });
        
      channels = [];
      allCategories.clear();
      categoryChannelCounts = {};
      
      // –ò—Ç–µ—Ä–∏—Ä—É–µ–º—Å—è –ø–æ originalLines, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å channels –∏ category data
      // –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, 
      // –≥–¥–µ originalLines –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, –∏–ª–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.
      // –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –≤ renderChannelList.
      for (let i = 0; i < originalLines.length; i++) {
        const line = originalLines[i].trim();
        if (line.startsWith('#EXTINF')) {
          const extinf = line;
          const nameMatch = extinf.match(/,(.*)$/);
          let name = nameMatch ? nameMatch[1].trim() : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª';
          let category = '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
          const groupTitleMatch = extinf.match(/group-title="([^"]*)"/i);
          if (groupTitleMatch) {
            category = groupTitleMatch[1].trim();
          }
          let url = '';
          let extgrp = '';
          let urlIndex = i + 1;
          while (urlIndex < originalLines.length) {
            const nextLine = lines[urlIndex].trim(); // –ò–°–ü–†–ê–í–õ–ï–ù–û: –±—ã–ª–æ lines[urlIndex].trim()
            if (nextLine.startsWith('#EXTGRP:')) {
              if (category === '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' || category === '') {
                category = nextLine.substring(8).trim();
              }
              extgrp = nextLine;
            } else if (nextLine && !nextLine.startsWith('#')) {
              url = nextLine;
              break;
            } else if (nextLine.startsWith('#EXTINF')) {
              break;
            }
            urlIndex++;
          }
          if (url) {
            const key = url + name;
            const isFav = tempFavoriteMap[key] || false; 

            channels.push({
              name, extinf, extgrp, url,
              startIndex: i,
              endIndex: urlIndex,
              category,
              isFavorite: isFav, 
            });
            allCategories.add(category);
            categoryChannelCounts[category] = (categoryChannelCounts[category] || 0) + 1;
            i = urlIndex;
          }
        }
      }
    }


    function updateCounter(filteredCount = null) {
      if (filteredCount !== null) {
          channelCounter.textContent = filteredCount;
      } else {
          let remainingChannels = channels.filter(entry => !excludedCategories.has(entry.category));
          
          if (excludedCategories.has(FAVORITE_CATEGORY)) { 
              remainingChannels = remainingChannels.filter(entry => !entry.isFavorite);
          }
          
          channelCounter.textContent = remainingChannels.length;
      }
    }

    searchInput.addEventListener('input', () => {
      renderChannelList(searchInput.value);
      initializeSortable();
    });

    function removeDuplicates() {
        const uniqueNames = new Set();
        // –í–ê–ñ–ù–û: –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –º—ã –≤—Å–µ –µ—â–µ –¥–æ–ª–∂–Ω—ã –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å originalLines
        // —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–µ-EXTINF —Å—Ç—Ä–æ–∫–∏ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, #EXTM3U –∏ —Ç.–¥.)
        const indicesToRemove = []; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω–¥–µ–∫—Å—ã –≤ –º–∞—Å—Å–∏–≤–µ channels –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
        let removedCount = 0;

        // –ò–¥–µ–º —Å –∫–æ–Ω—Ü–∞, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –¥—É–±–ª–∏–∫–∞—Ç
        for (let i = channels.length - 1; i >= 0; i--) {
            const channel = channels[i];
            const nameKey = channel.name.trim().toLowerCase(); 

            if (uniqueNames.has(nameKey)) {
                indicesToRemove.push(i); // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å –≤ channels
                removedCount++;
            } else {
                uniqueNames.add(nameKey);
            }
        }
        
        // –£–¥–∞–ª—è–µ–º –∫–∞–Ω–∞–ª—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞ channels (—Å –∫–æ–Ω—Ü–∞)
        indicesToRemove.sort((a, b) => b - a);
        indicesToRemove.forEach(index => {
            channels.splice(index, 1);
        });
        
        // –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ channels –æ–±–Ω–æ–≤–ª–µ–Ω, –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ–º originalLines (–ø—Ä–æ—Å—Ç–æ –∫–∞–∫ –º–∞—Å—Å–∏–≤)
        // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –º—ã –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∞ —Ç–æ–ª—å–∫–æ EXTINF/URL
        // –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–µ-EXTINF —Å—Ç—Ä–æ–∫–∏, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ.
        // –ù–æ –¥–ª—è —Ü–µ–ª–∏ "–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã" –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å.
        
        if (removedCount > 0) {
            // –ü–µ—Ä–µ–ø–∞—Ä—Å–∏–Ω–≥ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ –Ω—É–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –∫–∞–Ω–∞–ª—ã —É–∂–µ —É–¥–∞–ª–µ–Ω—ã.
            // –ù—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å UI.
            renderCategoryFilter();
            renderCategorySelect(); 
            renderChannelList(searchInput.value); 
            initializeSortable(); 
            showToast(`–£–¥–∞–ª–µ–Ω–æ ${removedCount} –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–∞–Ω–∞–ª–æ–≤.`); 
        } else {
            showToast('–î—É–±–ª–∏–∫–∞—Ç—ã –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.'); 
        }
    }
    
    removeDuplicatesBtn.addEventListener('click', removeDuplicates);
    
    // =======================================================
    // –§–£–ù–ö–¶–ò–ò –°–ï–†–í–ï–†–ù–û–ì–û –°–û–•–†–ê–ù–ï–ù–ò–Ø –ò –°–û–ö–†–ê–©–ï–ù–ò–Ø –°–°–´–õ–ö–ò
    // =======================================================

    async function shortenDynamicLink(longUrl) {
        const apiUrl = `https://is.gd/create.php?format=json&url=${encodeURIComponent(longUrl)}`;
        
        try {
            const response = await fetch(apiUrl);
            const data = await response.json();
            
            if (data.shorturl) {
                return data.shorturl;
            } else {
                console.error('is.gd Error:', data.errormessage || 'Unknown error');
                showToast(`–û—à–∏–±–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏: ${data.errormessage || '–°–±–æ–π API.'}`);
                return longUrl; // –í–µ—Ä–Ω—É—Ç—å –¥–ª–∏–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
            }
        } catch (error) {
            console.error('Fetch Error:', error);
            showToast('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å is.gd.');
            return longUrl; // –í–µ—Ä–Ω—É—Ç—å –¥–ª–∏–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è —Å–µ—Ç–∏
        }
    }

    async function uploadPlaylistToGitHub(content, count, persistentUserId) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–µ–ø–µ—Ä—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
        if (auth.currentUser?.isAnonymous) {
            console.error("Attempted server upload as guest. This should not happen.");
            showToast("–û—à–∏–±–∫–∞: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç—Ä–µ–±—É–µ—Ç –≤—Ö–æ–¥–∞.");
            return; 
        }

        const uploadUrl = '/.netlify/functions/save-playlist'; 
        
        try {
            // –§–∞–π–ª –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–æ–¥ —ç—Ç–∏–º –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É.
            const permanentFilename = `playlist_${persistentUserId}_latest.m3u`;
            
            const response = await fetch(uploadUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    filename: permanentFilename, // –ü–µ—Ä–µ–¥–∞–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∏–º—è
                    fileContent: content, 
                    userId: userId,
                }),
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.details || errorData.error || 'Unknown API Error');
            }
            
            // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, —Ç–æ –ø–ª–µ–π–ª–∏—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–µ
            showToast(`–ü–ª–µ–π–ª–∏—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. (${count} –∫–∞–Ω–∞–ª–æ–≤)`);
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
            showToast(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: ${error.message}`);
        }
    }


    // =======================================================
    // –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–ö–ò –°–û–•–†–ê–ù–ò–¢–¨ (–ê–°–ò–ù–•–†–û–ù–ù–´–ô)
    // =======================================================
    saveBtn.addEventListener('click', async () => {
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
      if (auth.currentUser?.isAnonymous) {
          showToast("–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ.");
          registrationModal.classList.remove('hidden');
          return;
      }
      
      // 1. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞ (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
      const includedChannels = channels.filter(entry => {
        const isNormalCategoryExcluded = excludedCategories.has(entry.category);
        const isFavoriteCategoryExcluded = excludedCategories.has(FAVORITE_CATEGORY);
        const isFavorite = entry.isFavorite;

        if (isFavorite) {
            return !isFavoriteCategoryExcluded;
        }
        
        return !isNormalCategoryExcluded;
      });
      
      const favoriteChannels = includedChannels.filter(c => c.isFavorite);

      let modifiedLines = ['#EXTM3U'];
      
      if (favoriteChannels.length > 0) {
        modifiedLines.push(`#EXTGRP:${DISPLAY_FAVORITE_CATEGORY}`); 
        
        favoriteChannels.forEach(entry => {
          let favExtinf = entry.extinf;
          
          favExtinf = favExtinf.replace(/group-title="([^"]*)"/i, `group-title="${DISPLAY_FAVORITE_CATEGORY}"`);
          
          if (!favExtinf.includes('group-title=')) {
              favExtinf = favExtinf.replace(/,(.*)$/, ` group-title="${DISPLAY_FAVORITE_CATEGORY}",$1`);
          }
          
          modifiedLines.push(favExtinf);
          modifiedLines.push(entry.url);
        });
        
        modifiedLines.push('\n');
      }
      
      const groupedChannels = {};
      includedChannels.forEach(entry => {
          if (entry.isFavorite) return;
          
          const cat = entry.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
          if (!groupedChannels[cat]) {
              groupedChannels[cat] = [];
          }
          groupedChannels[cat].push(entry);
      });
      
      const sortedCategories = Object.keys(groupedChannels).filter(cat => cat !== FAVORITE_CATEGORY).sort();
      
      sortedCategories.forEach(cat => {
          if (cat !== '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') {
             modifiedLines.push(`#EXTGRP:${cat}`);
          }

          groupedChannels[cat].forEach(entry => {
              modifiedLines.push(entry.extinf);
              if (entry.extgrp) {
                  modifiedLines.push(entry.extgrp);
              }
              modifiedLines.push(entry.url);
          });
      });
      
      editedContent = modifiedLines.join('\n');
      const finalChannelCount = includedChannels.length; 
      
      // 2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –î–õ–ò–ù–ù–û–ô –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
      const persistentUserId = userId; 
      const longDynamicLink = `https://read24.netlify.app/api/playlist/${persistentUserId}/latest.m3u`;
      
      // 3. –ó–ê–ü–£–°–ö –°–û–ö–†–ê–©–ï–ù–ò–Ø –ò –û–ë–ù–û–í–õ–ï–ù–ò–Ø UI
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –ª–æ–∞–¥–µ—Ä
      finalFileName.textContent = `–§–ê–ô–õ ${finalChannelCount} –ö–ê–ù–ê–õ–û–í`;
      dynamicPlaylistLink.value = "–°–æ–∫—Ä–∞—â–∞—é —Å—Å—ã–ª–∫—É...";
      shortLinkLoader.classList.remove('hidden');
      saveModal.classList.remove('hidden');
      
      // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å–æ–∫—Ä–∞—â–∞–µ–º —Å—Å—ã–ª–∫—É
      const shortLink = await shortenDynamicLink(longDynamicLink);
      
      // 4. –û–±–Ω–æ–≤–ª—è–µ–º UI –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
      shortLinkLoader.classList.add('hidden');
      dynamicPlaylistLink.value = shortLink;
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ GitHub –≤ —Ñ–æ–Ω–µ (–≤–∫–ª—é—á–∞–µ—Ç –æ–∂–∏–¥–∞–Ω–∏–µ)
      uploadPlaylistToGitHub(editedContent, finalChannelCount, persistentUserId); 
      
      // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ —Å—Ä–∞–∑—É
    });

    // =======================================================
    // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –õ–û–ö–ê–õ–¨–ù–û–ì–û –°–ö–ê–ß–ò–í–ê–ù–ò–Ø
    // =======================================================
    downloadBtn.addEventListener('click', () => {
      const blob = new Blob([editedContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      
      const remainingChannels = channels.filter(entry => {
        const isNormalCategoryExcluded = excludedCategories.has(entry.category);
        const isFavoriteCategoryExcluded = excludedCategories.has(FAVORITE_CATEGORY);
        const isFavorite = entry.isFavorite;

        if (isFavorite) {
            return !isFavoriteCategoryExcluded;
        }
        
        return !isNormalCategoryExcluded;
      });
      
      const remainingCount = remainingChannels.length; 
      // –ò–º—è —Ñ–∞–π–ª–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ
      a.download = `playlist_${remainingCount}.m3u`; 
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    closeSaveModal.addEventListener('click', () => {
      saveModal.classList.add('hidden');
    });
    
  </script>
</body>
</html>