<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактор плейлистов m3u</title>
    <link rel="icon" type="image/x-icon" href="https://read24.netlify.app/icon1.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

    <style>
        /* Определение цветов (КРАСНЫЙ АКЦЕНТ) */
        :root {
            --primary-color: #FF0000;
            --primary-hover-color: #CC0000;
            --text-color: #333;
            --secondary-text-color: #555;
            --background-light: #f9f9f9;
            --border-color: #eaeaef;
            --icon-size: 36px;
        }

        /* Базовый сброс, шрифт и АНИМАЦИИ */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            color: var(--text-color);
            scroll-behavior: smooth; 
            padding-top: 0; 
            min-height: 100vh;
            display: block;
            justify-content: flex-start;
            align-items: flex-start;
        }

        /* -------------------------------------------
           ОБЩИЕ СТИЛЫ (Desktop) 
           ------------------------------------------- */
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        main section {
            opacity: 1; 
        }
        
        .animated {
            animation: fadeIn 0.8s ease-out forwards;
        }

        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 40px;
            background-color: #ffffff;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo a {
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 32px;
            width: auto;
        }

        .main-nav { display: block; }
        .main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 35px;
            align-items: center;
        }

        .main-nav a {
            text-decoration: none;
            color: var(--secondary-text-color);
            font-size: 15px;
            font-weight: 400;
            padding: 5px 0;
            transition: color 0.2s ease, opacity 0.2s ease;
        }

        .main-nav a:hover {
            color: #000;
        }
        
        .main-nav a.nav-button.primary:hover {
            color: #ffffff; 
        }

        .nav-button {
            display: inline-block;
            padding-top: 8px;
            padding-bottom: 8px;
            border-radius: 999px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        .nav-button.primary {
            padding-left: 24px; 
            padding-right: 24px;
            background-color: var(--primary-color); 
            color: #ffffff;
            border: none;
        }

        .nav-button.primary:hover {
            background-color: var(--primary-hover-color);
        }

        .nav-button.secondary {
            padding-left: 16px; 
            padding-right: 16px;
            background-color: transparent; 
            color: var(--primary-color); 
            border: 1px solid var(--primary-color); 
        }

        .nav-button.secondary:hover {
            background-color: #f0f0f5; 
            color: var(--primary-hover-color);
            border-color: var(--primary-hover-color);
        }

        .hero-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 120px 20px 80px; 
            background-color: #ffffff; 
            opacity: 1 !important; 
            animation: none !important;
        }

        .hero-title {
            font-size: 48px; 
            font-weight: 700;
            color: #000;
            max-width: 800px;
            line-height: 1.1;
            margin-bottom: 20px;
        }

        #dynamic-text {
            color: var(--primary-color); 
            display: inline-block;
            min-width: 250px;
            transition: opacity 0.3s ease;
        }

        /* Стили разделов лэндинга */
        .features-section, .process-section, .comparison-section, .faq-section {
            padding: 80px 40px; 
            text-align: center;
        }
        .features-section, .comparison-section { background-color: var(--background-light); }
        .process-section, .faq-section { background-color: #ffffff; }

        .section-subtitle {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section-title {
            font-size: 36px;
            font-weight: 700;
            color: #000;
            margin-top: 0;
            margin-bottom: 50px;
        }

        .features-grid {
            display: flex;
            justify-content: center;
            gap: 30px; 
            max-width: 1000px;
            margin: 0 auto;
            flex-wrap: wrap;
        }

        .feature-item {
            flex-basis: 300px; 
            padding: 30px; 
            text-align: center;
            background-color: #ffffff; 
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-item:hover {
            transform: translateY(-8px); 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); 
        }

        .feature-item i {
            font-size: var(--icon-size);
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-item h3 {
            font-size: 20px; 
            font-weight: 600;
            color: #000;
            margin-top: 0;
            margin-bottom: 10px; 
        }

        .feature-item p {
            font-size: 18px; 
            color: var(--secondary-text-color);
            line-height: 1.6;
            margin-top: 0;
            margin-bottom: 0;
        }

        .steps-grid {
            display: flex;
            justify-content: center;
            gap: 40px 30px; 
            max-width: 1000px; 
            margin: 0 auto;
            flex-wrap: wrap; 
        }

        .step-item {
            flex-basis: calc(50% - 30px); 
            max-width: 470px; 
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease; 
        }

        .step-item:hover {
            transform: translateY(-5px);
        }

        .step-item .step-number {
            display: block; 
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            background-color: var(--primary-color);
            width: 45px;
            height: 45px;
            line-height: 45px;
            border-radius: 50%;
            text-align: center;
            margin: 0 auto 20px auto; 
        }

        .step-item h3 {
            font-size: 22px; 
            font-weight: 600;
            color: #000;
            margin-top: 0;
            margin-bottom: 10px;
            text-align: center; 
        }

        .step-item p {
            font-size: 16px; 
            color: var(--secondary-text-color);
            line-height: 1.6;
            text-align: center; 
        }

        .comparison-table {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            border-collapse: collapse;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            background-color: #ffffff;
            border-radius: 12px;
            overflow: hidden; 
            transition: transform 0.3s ease;
        }

        .comparison-table:hover {
            transform: scale(1.01);
        }

        .comparison-table table {
            width: 100%; 
        }

        .comparison-table th, .comparison-table td {
            padding: 15px;
            border: 1px solid var(--border-color);
            text-align: center;
            font-size: 16px;
        }

        .comparison-table th {
            background-color: #f0f0f5;
            color: var(--text-color);
            font-weight: 600;
            font-size: 17px;
        }

        .comparison-table .feature {
            text-align: left;
            font-weight: 500;
            width: 35%;
        }

        .comparison-table .icon-yes {
            color: green;
            font-weight: bold;
        }

        .comparison-table .icon-no {
            color: var(--primary-color);
        }

        .comparison-section .nav-button.primary {
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .faq-container {
            max-width: 900px;
            margin: 0 auto;
            text-align: left;
        }

        details {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 10px;
            padding-bottom: 10px;
            transition: background-color 0.3s ease; 
        }
        
        details:hover {
            background-color: #fcfcfc;
        }

        details summary {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-color);
            padding: 15px 0;
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        details summary:hover {
            color: var(--primary-color);
        }

        details summary::-webkit-details-marker {
            display: none;
        }

        details p {
            font-size: 16px;
            color: var(--secondary-text-color);
            padding: 5px 0 15px 0;
            line-height: 1.6;
        }
        
        details summary::after {
            content: "\f078"; 
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            font-size: 14px;
            transition: transform 0.2s ease;
        }

        details[open] summary::after {
            transform: rotate(180deg);
        }


        /* -------------------------------------------
           МОБИЛЬНЫЕ СТИЛЫ (Media Query)
           ------------------------------------------- */
        
        .menu-toggle, #mobile-menu {
            display: none;
        }

        @media (max-width: 768px) {
            
            .site-header {
                padding: 10px 20px; 
                display: grid;
                grid-template-columns: 1fr auto 1fr; 
                grid-template-areas: "logo actions menu-toggle";
            }

            .main-nav { display: none; }
            .logo { grid-area: logo; justify-self: start; }
            .header-actions { grid-area: actions; justify-self: center; }
            .menu-toggle {
                grid-area: menu-toggle;
                display: block;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: var(--text-color);
                padding: 0;
                justify-self: end;
            }
            
            #mobile-menu {
                display: none; 
                position: fixed; 
                top: 52px; 
                left: 0;
                width: 100%;
                height: 100vh; 
                overflow-y: auto; 
                background-color: #ffffff;
                border-bottom: 1px solid var(--border-color);
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                padding: 10px 0;
                z-index: 90;
            }

            #mobile-menu ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            #mobile-menu li {
                text-align: center; 
                padding: 12px 20px;
                border-bottom: 1px solid #f5f5f5;
            }
            
            #mobile-menu a {
                display: block;
                font-size: 16px;
                color: var(--text-color);
                text-decoration: none;
                padding: 0; 
            }
            
            #mobile-menu .nav-button.primary {
                width: 60%; 
                display: inline-block; 
                box-sizing: border-box; 
                font-size: 17px; 
                padding-top: 12px;
                padding-bottom: 12px;
                padding-left: 20px; 
                padding-right: 20px;
                color: #ffffff;
                margin-top: 10px; 
            }

            .hero-section {
                padding-top: 40px; 
                padding-bottom: 60px;
                padding-left: 20px;
                padding-right: 20px;
            }
            .hero-title {
                font-size: 28px; 
            }
            #dynamic-text {
                min-width: 150px; 
            }

            .hero-section .nav-button.primary {
                font-size: 17px; 
                padding: 12px 30px; 
            }
            
            .features-section {
                padding-top: 40px; 
                padding-bottom: 40px; 
                padding-left: 20px;
                padding-right: 20px;
            }
            
            .section-title {
                font-size: 28px;
                margin-bottom: 30px;
            }

            .features-grid {
                flex-direction: column;
                gap: 10px; 
            }
            
            .feature-item {
                background-color: #ffffff; 
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); 
                border-radius: 12px;
                border-bottom: none; 
                transform: none;
                padding: 15px; 
                display: flex; 
                flex-direction: column; 
                justify-content: center; 
                height: 140px; 
            }
            
            .feature-item i, 
            .feature-item h3, 
            .feature-item p {
                margin: 0; 
                padding: 0; 
                display: block; 
            }

            .feature-item i {
                margin-top: 5px; 
                margin-bottom: 8px; 
            }

            .feature-item h3 {
                font-size: 20px; 
                margin-bottom: 5px; 
            }

            .feature-item p {
                font-size: 18px; 
            }

            .process-section {
                padding-top: 40px; 
                padding-bottom: 40px; 
                padding-left: 20px;
                padding-right: 20px;
            }
            
            .steps-grid {
                flex-direction: column;
                gap: 10px; 
            }
            
            .step-item {
                padding: 20px;
                text-align: center;
                background-color: #ffffff; 
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); 
                border-radius: 12px;
                display: flex; 
                flex-direction: column; 
                justify-content: center;
                min-height: 120px; 
                flex-basis: auto; 
                max-width: 100%;
            }
            
            .step-item .step-number {
                margin: 0 auto 15px auto; 
            }
            
            .step-item h3 {
                text-align: center; 
            }
            
            .step-item p {
                text-align: center; 
            }

            .comparison-section {
                padding-top: 40px;
                padding-bottom: 40px;
                padding-left: 0; 
                padding-right: 0;
            }

            .comparison-table {
                display: block;
                overflow-x: auto; 
                width: 100%;
                border-radius: 0; 
                box-shadow: none; 
            }
            
            .comparison-table table {
                width: 100%;
                min-width: 550px; 
                border-radius: 0;
            }

            .comparison-table th, .comparison-table td {
                padding: 12px 10px; 
                font-size: 15px; 
            }
            
            .comparison-table .feature {
                text-align: left;
                padding-left: 20px; 
            }

            .faq-section {
                padding: 40px 20px;
            }
            details summary {
                font-size: 17px;
            }
            details p {
                font-size: 15px;
            }
        }
        
        /* Стили из index2.html, необходимые для редактора/модалок */
        #categoryFilter {
          max-height: 200px;
          overflow-y: auto;
          border: 1px solid #e5e7eb;
          border-radius: 0.75rem;
          padding: 0.5rem;
        }
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }

        .sortable-channel {
          cursor: grab;
          touch-action: none; 
        }
        
        .sortable-ghost {
          opacity: 0.4;
          background-color: #f3f4f6; 
          border: 2px dashed #9ca3af; 
          border-radius: 0.75rem;
        }

        /* Общие стилы для экрана редактора, чтобы скрыть лэндинг */
        #editorScreen {
            display: none;
            width: 100%; 
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 60px; /* Отступ от фиксированной шапки */
            min-height: 100vh;
            background-color: white; 
        }
        
        /* МОБИЛЬНАЯ АДАПТАЦИЯ ДЛЯ СПИСКА КАНАЛОВ (из index2.html) */
        @media (max-width: 640px) { 
            .channel-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 0.75rem 1rem; 
            }
            .channel-name {
                max-width: 100% !important; 
                margin-bottom: 0.5rem;
                font-size: 24px; 
                font-weight: 900; 
            }
            .channel-buttons-container {
                display: flex; 
                flex-direction: row; 
                justify-content: space-between;
                width: 100%; 
            }
            
            .channel-download-btn, .channel-delete-btn, .channel-favorite-btn { 
                flex-shrink: 0;
            }
            
            /* СТИЛЫ ДЛЯ МОБИЛЬНОЙ АДАПТАЦИИ ЭКРАНА РЕДАКТОРА */
            #editorScreen .sm\:justify-between {
                justify-content: center; 
            }
            #editorScreen .sm\:items-center {
                align-items: center; 
            }
            #editorScreen .sm\:flex-row {
                flex-direction: column; 
            }
            #editorScreen .sm\:text-left {
                text-align: center; 
            }
            #editorScreen .sm\:w-auto {
                width: 100%; 
                justify-content: center;
                margin-top: 0.5rem; 
            }
        }
    </style>
</head>
<body>

    <header class="site-header fixed top-0 left-0 w-full bg-white shadow-md z-30">
        
        <div class="logo">
            <a href="#"> 
                <img src="https://read24.netlify.app/icon1.ico" alt="Логотип сайта">
            </a>
        </div>
        
        <nav class="main-nav" id="desktopNav">
            <ul>
                <li><a href="#advantages">Преимущества</a></li>
                <li><a href="#how-to-edit">Как редактировать</a></li>
                <li><a href="#comparison">Сравнение</a></li> 
                <li><a href="#faq">Частые вопросы</a></li>
                <li><a href="#" id="openRegisterFromNav" class="nav-button primary">Регистрация</a></li>
            </ul>
        </nav>

        <div class="header-actions">
            <a href="#" id="openRegisterFromLogin" class="nav-button secondary">Войти</a>
            <button id="logoutBtn"
                class="bg-red-600 text-white text-sm font-semibold px-4 py-2 rounded-xl shadow-md hover:bg-red-700 transition hidden">
                ВЫЙТИ
            </button>
        </div>
        
        <button class="menu-toggle" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <nav id="mobile-menu">
        <ul>
            <li><a href="#advantages">Преимущества</a></li>
            <li><a href="#how-to-edit">Как редактировать</a></li>
            <li><a href="#comparison">Сравнение</a></li> 
            <li><a href="#faq">Частые вопросы</a></li>
            <li>
                <a href="#" id="openRegisterFromMobile" class="nav-button primary">Регистрация</a>
            </li>
        </ul>
    </nav>
    
    <div id="mainScreen">
        <main>
            <section class="hero-section">
                <h1 class="hero-title">
                    Редактируйте любые плейлисты для 
                    <strong id="dynamic-text">вашего удобства.</strong>
                </h1>
                
                <p style="font-size: 18px; color: #666; max-width: 600px; margin-bottom: 30px;">
                    Получите полный контроль над вашими медиатеками, объединяя источники и настраивая порядок просмотра.
                </p>
                <a href="#" id="openRegisterFromHero" class="nav-button primary" style="font-size: 16px; padding: 12px 30px;">
                    Попробовать
                </a>
            </section>

            <section id="advantages" class="features-section">
                <p class="section-subtitle">Почему мы?</p>
                <h2 class="section-title">Возможности для ваших плейлистов</h2>
                <div class="features-grid">
                    
                    <div class="feature-item">
                        <i class="fas fa-sliders-h"></i> 
                        <h3>Полный контроль</h3>
                        <p>Настраивайте порядок воспроизведения, удаляйте ненужное и добавляйте новый контент в вашу библиотеку за секунды.</p>
                    </div>

                    <div class="feature-item">
                        <i class="fas fa-tablet-alt"></i>
                        <h3>Просмотр без границ</h3>
                        <p>Смотрите ваши плейлисты на любом устройстве: от мобильного телефона до Smart TV. Всегда синхронизировано.</p>
                    </div>

                    <div class="feature-item">
                        <i class="fas fa-link"></i>
                        <h3>Единая библиотека</h3>
                        <p>Объединяйте медиафайлы из разных источников в одно централизованное и удобное место для доступа.</p>
                    </div>

                </div>
            </section>
            
            <section id="how-to-edit" class="process-section">
                <p class="section-subtitle">Как это работает</p>
                <h2 class="section-title">Процесс Редактирования: Начните за 4 Шага</h2>
                <div class="steps-grid">
                    
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <h3>Регистрация</h3>
                        <p>Быстро создайте личный кабинет, чтобы получить доступ ко всем инструментам редактирования и облачному хранилищу.</p>
                    </div>
                    
                    <div class="step-item">
                        <span class="step-number">2</span>
                        <h3>Загрузите плейлист</h3>
                        <p>Импортируйте файл .m3u, .m3u8, или другой поддерживаемый формат, используя прямую ссылку или загрузку с устройства.</p>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <h3>Отредактируйте список</h3>
                        <p>Используйте удобный drag-and-drop интерфейс для изменения порядка, удаления или добавления новых каналов/ссылок.</p>
                    </div>

                    <div class="step-item">
                        <span class="step-number">4</span>
                        <h3>Сохраните и используйте</h3>
                        <p>Сохраните изменения. Вы получите новую ссылку, которая будет автоматически обновляться, или скачаете готовый файл.</p>
                    </div>

                </div>
            </section>
            <section id="comparison" class="comparison-section">
                <p class="section-subtitle">Выберите свой путь</p>
                <h2 class="section-title">Сравнение Доступов: С регистрацией vs Без неё</h2>
                
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th class="feature">Возможность</th>
                                <th>Без регистрации</th>
                                <th>С регистрацией</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="feature">Единоразовое редактирование плейлиста</td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                            </tr>
                            <tr>
                                <td class="feature">Сохранение плейлиста в облаке</td>
                                <td class="icon-no"><i class="fas fa-times"></i></td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                            </tr>
                            <tr>
                                <td class="feature">Динамическая ссылка на плейлист (автообновление)</td>
                                <td class="icon-no"><i class="fas fa-times"></i></td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                            </tr>
                            <tr>
                                <td class="feature">Доступ к истории изменений</td>
                                <td class="icon-no"><i class="fas fa-times"></i></td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                            </tr>
                            <tr>
                                <td class="feature">Синхронизация между устройствами</td>
                                <td class="icon-no"><i class="fas fa-times"></i></td>
                                <td class="icon-yes"><i class="fas fa-check"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p style="font-size: 16px; color: var(--secondary-text-color); margin-top: 30px; max-width: 800px; margin-left: auto; margin-right: auto; padding: 0 20px;">
                    Для получения максимального удобства и доступа ко всем продвинутым функциям редактирования плейлистов, рекомендуем пройти **быструю регистрацию**.
                </p>
                <a href="#" id="openRegisterFromComp" class="nav-button primary">
                    Регистрация
                </a>
            </section>
            <section id="faq" class="faq-section">
                <p class="section-subtitle">Спросите нас</p>
                <h2 class="section-title">Частые вопросы</h2>
                
                <div class="faq-container">

                    <details>
                        <summary>
                            Какие форматы плейлистов поддерживает ваш редактор?
                        </summary>
                        <p>
                            Наш редактор поддерживает наиболее популярные форматы, включая **M3U, M3U8** и **TXT** (для простых списков ссылок). Мы постоянно работаем над добавлением поддержки других распространенных форматов.
                        </p>
                    </details>

                    <details>
                        <summary>
                            Могу ли я объединить несколько плейлистов в один?
                        </summary>
                        <p>
                            Да, это одна из ключевых возможностей нашего сервиса! Вы можете легко импортировать несколько файлов или ссылок, а затем объединить их в одну централизованную библиотеку.
                        </p>
                    </details>

                    <details>
                        <summary>
                            Что такое "Динамическая ссылка на плейлист" и как она работает?
                        </summary>
                        <p>
                            Динамическая ссылка (доступна после регистрации) — это постоянный URL вашего плейлиста. Когда вы вносите изменения в список через наш редактор, плейлист по этой ссылке **автоматически обновляется** на всех ваших устройствах (Smart TV, плееры и т.д.).
                        </p>
                    </details>

                    <details>
                        <summary>
                            Безопасно ли загружать мой плейлист?
                        </summary>
                        <p>
                            Абсолютно. Мы гарантируем полную конфиденциальность и не храним личные данные или содержимое ваших плейлистов, если вы сами не решите сохранить их в личном кабинете. Даже в этом случае они защищены.
                        </p>
                    </details>

                    <details>
                        <summary>
                            Могу ли я изменить порядок каналов/ссылок?
                        </summary>
                        <p>
                            Да. Наш редактор имеет интуитивно понятный интерфейс **Drag-and-Drop (перетаскивание)**, который позволяет легко менять порядок элементов в списке простым движением мыши или касанием.
                        </p>
                    </details>

                    <details>
                        <summary>
                            Нужно ли регистрироваться, чтобы просто отредактировать один плейлист?
                        </summary>
                        <p>
                            Нет, для **единоразового редактирования** и скачивания файла регистрация не требуется. Однако, чтобы сохранить плейлисты в облаке и получить динамическую ссылку для автообновления, регистрация необходима.
                        </p>
                    </details>

                    <details>
                        <summary>
                            Работает ли ваш редактор на мобильных устройствах?
                        </summary>
                        <p>
                            Да, наш сервис полностью адаптирован и корректно работает на всех современных устройствах, включая смартфоны, планшеты и настольные компьютеры.
                        </p>
                    </details>

                </div>
            </section>
        </main>
    </div>

    <div id="editorScreen" class="hidden w-full max-w-7xl mx-auto py-6 px-4">
        
        <div id="uploadScreen" class="text-center w-full max-w-md mx-auto py-20 hidden"></div>

        <div id="channelEditor" class="w-full hidden"> 
            <div class="text-center py-20">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Перенаправление...</h2>
                <p class="text-gray-600">Если перенаправление не произошло, нажмите <a href="https://read24.netlify.app/test/" class="text-blue-600 hover:underline">сюда</a>.</p>
            </div>
            
            <div id="editorContent" class="hidden"></div>
            <div id="editorPlaceholder" class="hidden"></div>
        </div>
    </div>


    <div id="registrationModal"
        class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
        <div class="bg-white rounded-3xl p-4 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
        
        <h2 class="text-2xl font-extrabold text-center mb-4 text-gray-800">
            Добро пожаловать! 🎶
        </h2>
        <p class="text-center text-gray-600 mb-4 text-sm">
            Создайте свой аккаунт, чтобы сохранять плейлисты.
        </p>

        <button id="registerGoogleBtn"
            class="w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 text-base font-medium px-4 py-2 rounded-xl shadow-sm hover:bg-gray-100 transition mb-3">
            <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12.0003 4.75C14.7173 4.75 16.9833 5.772 18.6673 7.359L20.5903 5.487C18.3143 3.498 15.3623 2.25 12.0003 2.25C8.01332 2.25 4.54932 4.53 2.87132 7.824L5.87532 10.125C6.73632 7.787 9.12632 6.25 12.0003 6.25C13.8823 6.25 15.6173 6.942 16.9803 8.167L19.4583 6.135C18.0493 4.904 16.1433 4.25 14.2503 4.25H12.0003V4.75Z" fill="#EA4335"/>
            <path d="M12.0003 17.75C13.2133 17.75 14.3723 17.419 15.3853 16.829L18.3903 19.13C16.6383 20.375 14.3763 21 12.0003 21C7.81732 21 4.28832 18.577 2.50232 15.111L5.53732 12.83C6.34732 15.309 9.07332 17 12.0003 17V17.75Z" fill="#34A853"/>
            <path d="M21.2503 12C21.2503 11.234 21.1813 10.493 21.0543 9.774H12.0003V14.25H17.2273C17.0673 15.186 16.5183 15.996 15.7503 16.591L18.7853 18.868C20.4433 17.375 21.2503 15.342 21.2503 13.007V12Z" fill="#4285F4"/>
            <path d="M5.87532 10.125L2.87132 7.824C2.26132 9.068 2.00032 10.493 2.00032 12C2.00032 13.507 2.26132 14.932 2.87132 16.176L5.87532 13.875V10.125Z" fill="#FBBC05"/>
            </svg>
            Войти через Google
        </button>
        
        <div class="flex items-center my-4">
            <div class="flex-grow border-t border-gray-300"></div>
            <span class="flex-shrink mx-4 text-gray-500 text-sm">или</span>
            <div class="flex-grow border-t border-gray-300"></div>
        </div>

        <form id="registrationFormElement">
            <div class="mb-3">
            <label for="reg-email" class="block text-xs font-medium text-gray-700 mb-1 text-left">
                Email
            </label>
            <input type="email" id="reg-email" placeholder="example@mail.com" required
                class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-base shadow-inner">
            </div>

            <div class="mb-4">
            <label for="reg-password" class="block text-xs font-medium text-gray-700 mb-1 text-left">
                Пароль
            </label>
            <input type="password" id="reg-password" placeholder="Придумайте пароль" required
                class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-base shadow-inner">
            </div>

            <button type="submit" id="registerEmailBtn"
            class="w-full bg-black text-white text-base font-semibold px-6 py-2 rounded-xl shadow-lg hover:bg-gray-900 transition mb-3">
            ЗАРЕГИСТРИРОВАТЬСЯ
            </button>
        </form>
        
        <p class="text-center text-xs text-gray-600">
            Уже есть аккаунт? 
            <a href="#" id="loginLink" class="text-black font-semibold hover:text-gray-700 transition">Войти</a>
        </p>

        <button id="closeRegisterModal"
            class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition mt-3">
            ОТМЕНА
        </button>

        </div>
    </div>
    
    <div id="uploadModal"
        class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
        <input type="file" id="fileInput" accept="*/*" class="hidden">
        <div class="bg-white rounded-3xl p-6 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
            <h2 class="text-xl font-semibold mb-6 text-gray-800">Загрузка нового плейлиста</h2>

            <div id="dropAreaModal" class="p-4 rounded-2xl border-2 border-transparent transition">
                <button id="uploadModalBtn"
                    class="bg-black text-white text-lg font-semibold px-6 py-3 rounded-2xl shadow-lg hover:bg-gray-900 transition w-full mx-auto mb-4">
                    ЗАГРУЗИТЬ ФАЙЛ
                </button>
                
                <div class="my-4 text-gray-600 hidden">или перетащите сюда</div>
                
                <div class="flex flex-col gap-3 w-full mx-auto mb-4">
                    <input type="text" id="urlModalInput" placeholder="Введите ссылку на m3u файл"
                        class="w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-black bg-gray-50 text-lg shadow-inner">
                    
                    <button id="loadUrlModalBtn"
                        class="w-full bg-black text-white text-lg font-semibold px-6 py-3 rounded-2xl shadow-lg hover:bg-gray-900 transition">
                        ВПЕРЕД
                    </button>
                </div>
            </div>
            <div id="loadingModal" class="hidden text-blue-600 mt-4">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"></div>
                Загрузка файла...
            </div>

            <button id="closeUploadModal"
                class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition mt-4">
                ОТМЕНА
            </button>
        </div>
    </div>

    <div id="saveModal"
        class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
        <div class="bg-white rounded-3xl p-6 w-[90%] max-w-md shadow-xl animate-fade-in text-center text-black">
            <h2 id="finalFileName" class="text-2xl font-bold mb-6">ФАЙЛ 0 КАНАЛОВ</h2>

            <div id="dynamicLinkContainer" class="mb-6 p-4 bg-gray-100 rounded-xl text-left">
                <h3 class="text-sm font-bold text-gray-800 mb-2">Ваша Короткая Динамическая Ссылка</h3>
                <div id="shortLinkLoader" class="text-center text-blue-600 mb-2 hidden">
                    <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mx-auto mb-1"></div>
                    Сокращаю...
                </div>
                <input type="text" id="dynamicPlaylistLink" readonly
                    class="w-full text-sm font-mono p-2 border border-gray-300 rounded-lg bg-white truncate">
                <button id="copyLinkBtn"
                    class="w-full mt-2 bg-blue-600 text-white font-medium py-1 rounded-lg transition hover:bg-blue-700 text-sm">
                    КОПИРОВАТЬ ССЫЛКУ
                </button>
            </div>
            <button id="downloadBtn"
                class="w-full bg-black text-white font-medium py-2 rounded-xl transition hover:bg-gray-800 mb-2">
                СКАЧАТЬ ЛОКАЛЬНО
            </button>
            <button id="closeSaveModal"
                class="w-full bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 rounded-xl transition">
                ЗАКРЫТЬ
            </button>
        </div>
    </div>

    <div id="toastNotification" class="fixed bottom-5 right-5 bg-green-600 text-white px-4 py-3 rounded-xl shadow-lg hidden animate-fade-in z-50">
        Плейлист загружен. Каналов: <span id="toastChannelCount" class="font-bold">0</span>
    </div>

    <div id="globalLoader" class="fixed inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
        <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-white mb-4"></div>
        <p class="text-white text-xl font-semibold">Обработка плейлиста...</p>
    </div>


    <script type="module">
        // =======================================================
        // FIREBASE INITIALIZATION AND AUTH
        // =======================================================
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInAnonymously, 
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword, 
            GoogleAuthProvider,
            signInWithPopup,
            signOut,
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // КОНФИГУРАЦИЯ FIREBASE (используется предоставленная)
        const providedFirebaseConfig = {
            apiKey: "AIzaSyCko3aktIDmXWbsDekdr-dKUscX2fkRpjo",
            authDomain: "read24-7.firebaseapp.com",
            projectId: "read24-7",
            storageBucket: "read24-7.firebasestorage.app",
            messagingSenderId: "966949567813",
            appId: "1:966949567813:web:b12ff4001282d20c29922c",
            measurementId: "G-NVEC5F7S8F"
        };

        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : JSON.stringify(providedFirebaseConfig));
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        let userId = 'guest';

        // Константы для перенаправления
        const EDITOR_URL = 'https://read24.netlify.app/test/';
        const LOGOUT_URL = 'https://read24.netlify.app/end/';

        // Переменные для переключения экранов
        const mainScreen = document.getElementById('mainScreen');
        const editorScreen = document.getElementById('editorScreen');
        const logoutBtn = document.getElementById('logoutBtn');
        const openRegisterFromLogin = document.getElementById('openRegisterFromLogin'); 
        const registrationModal = document.getElementById('registrationModal');
        const registrationFormElement = document.getElementById('registrationFormElement');
        const loginLink = document.getElementById('loginLink');
        const closeRegisterModal = document.getElementById('closeRegisterModal');
        const registerGoogleBtn = document.getElementById('registerGoogleBtn');

        // --- ФУНКЦИИ ПЕРЕНАПРАВЛЕНИЯ ---
        function redirectTo(url) {
            window.location.href = url;
        }

        // Кнопки для открытия модалки
        document.getElementById('openRegisterFromLogin').addEventListener('click', (e) => { e.preventDefault(); registrationModal.classList.remove('hidden'); });
        document.getElementById('openRegisterFromNav').addEventListener('click', (e) => { e.preventDefault(); registrationModal.classList.remove('hidden'); });
        document.getElementById('openRegisterFromMobile').addEventListener('click', (e) => { e.preventDefault(); registrationModal.classList.remove('hidden'); /* Дополнительная логика меню */ });
        document.getElementById('openRegisterFromHero').addEventListener('click', (e) => { e.preventDefault(); registrationModal.classList.remove('hidden'); });
        document.getElementById('openRegisterFromComp').addEventListener('click', (e) => { e.preventDefault(); registrationModal.classList.remove('hidden'); });

        // ФУНКЦИИ АУТЕНТИФИКАЦИИ
        async function initializeAuth() {
            try {
                await signInAnonymously(auth);
            } catch (error) {
                console.error("Auth initialization failed:", error.message);
            }
        }

        // --- ЛОГИКА ОТОБРАЖЕНИЯ ЭКРАНОВ И ШАПКИ ---
        function updateUI(user) {
            const isAuthenticated = user && !user.isAnonymous;

            if (isAuthenticated) {
                // Если вошли:
                logoutBtn.classList.remove('hidden'); 
                openRegisterFromLogin.classList.add('hidden'); 
                userId = user.uid;
                
                // Перенаправляем, если мы на главной странице (чтобы избежать циклического редиректа)
                if (window.location.href !== EDITOR_URL) {
                    redirectTo(EDITOR_URL);
                }
                
                // Блок ниже - заглушка, которая должна сработать, если редирект не произошел (например, на тестовой странице)
                mainScreen.classList.add('hidden');
                editorScreen.classList.remove('hidden');
                document.body.style.paddingTop = '60px'; 

            } else {
                // Если не вошли (гость):
                logoutBtn.classList.add('hidden');
                openRegisterFromLogin.classList.remove('hidden'); 
                userId = 'guest';
                
                // Если мы на странице, требующей авторизации, перенаправляем на главную,
                // но поскольку у нас редирект на внешнюю страницу, это просто обновит UI на текущей странице,
                // если только мы не находимся на странице выхода.
                if (window.location.href === LOGOUT_URL) {
                    // Ничего не делаем, остаемся на LOGOUT_URL
                } else if (window.location.href.startsWith(EDITOR_URL)) {
                    // Если пользователь вышел, находясь на странице редактора (EDITOR_URL),
                    // то мы просто не обновляем UI, так как произойдет редирект на LOGOUT_URL (см. handleLogout)
                } else {
                    // Обновляем UI до состояния лэндинга
                    mainScreen.classList.remove('hidden');
                    editorScreen.classList.add('hidden');
                    document.body.style.paddingTop = '0';
                }
            }
        }

        onAuthStateChanged(auth, (user) => {
             updateUI(user);
        });

        initializeAuth();

        async function handleEmailSignIn(email, password) {
            try {
                await signInWithEmailAndPassword(auth, email, password);
                showToast("Вход успешен! Добро пожаловать.");
                registrationModal.classList.add('hidden');
                redirectTo(EDITOR_URL); // <--- ПЕРЕНАПРАВЛЕНИЕ
                return true;
            } catch (error) {
                let errorMessage = "Ошибка входа. Неверный Email или пароль.";
                if (error.code === 'auth/user-not-found') {
                    errorMessage = "Пользователь с таким Email не найден.";
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = "Неверный пароль.";
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = "Неверный формат Email.";
                } else {
                    errorMessage = `Ошибка: ${error.message}`;
                }
                showToast(errorMessage);
                console.error("Email sign-in error:", error.code, error.message);
                return false;
            }
        }

        async function handleEmailRegistration(e) {
            e.preventDefault();
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            
            if (!email || !password) {
                showToast("Пожалуйста, заполните все поля.");
                return;
            }

            try {
                await createUserWithEmailAndPassword(auth, email, password);
                showToast("Регистрация успешна! Вы вошли в систему.");
                registrationModal.classList.add('hidden');
                redirectTo(EDITOR_URL); // <--- ПЕРЕНАПРАВЛЕНИЕ
            } catch (error) {
                if (error.code === 'auth/email-already-in-use') {
                    showToast("Email уже зарегистрирован. Попытка входа...");
                    await handleEmailSignIn(email, password);
                } else {
                    let errorMessage = "Ошибка регистрации.";
                    switch (error.code) {
                        case 'auth/invalid-email':
                            errorMessage = "Неверный формат Email.";
                            break;
                        case 'auth/weak-password':
                            errorMessage = "Пароль должен быть не менее 6 символов.";
                            break;
                        default:
                            errorMessage = `Ошибка: ${error.message}`;
                    }
                    showToast(errorMessage);
                    console.error("Email registration error:", error.code, error.message);
                }
            }
        }

        async function handleGoogleRegistration() {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
                showToast("Вход через Google успешен!");
                registrationModal.classList.add('hidden');
                redirectTo(EDITOR_URL); // <--- ПЕРЕНАПРАВЛЕНИЕ
            } catch (error) {
                let errorMessage = "Ошибка входа через Google.";
                if (error.code === 'auth/popup-closed-by-user') {
                    errorMessage = "Окно входа было закрыто.";
                } else {
                    errorMessage = `Ошибка: ${error.message}`;
                }
                showToast(errorMessage);
                console.error("Google sign-in error:", error.code, error.message);
            }
        }
        
        async function handleLogout() {
            try {
                await signOut(auth);
                // Очистка данных
                channels = []; 
                originalLines = [];
                showToast("Вы успешно вышли из аккаунта.");
                // ПЕРЕНАПРАВЛЕНИЕ ПОСЛЕ ВЫХОДА
                redirectTo(LOGOUT_URL); 
            } catch (error) {
                console.error("Logout error:", error.message);
                showToast("Ошибка при выходе.");
            }
        }

        // =======================================================
        // ОБРАБОТЧИКИ МОДАЛОК И АУТЕНТИФИКАЦИИ
        // =======================================================
        registrationFormElement.addEventListener('submit', handleEmailRegistration);
        registerGoogleBtn.addEventListener('click', handleGoogleRegistration);
        // Обработчик для кнопки "ВЫЙТИ"
        document.getElementById('logoutBtn').addEventListener('click', handleLogout); 
        closeRegisterModal.addEventListener('click', () => { registrationModal.classList.add('hidden'); });
        
        if (loginLink) {
            loginLink.addEventListener('click', (e) => {
                e.preventDefault();
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                if (email && password) {
                    handleEmailSignIn(email, password);
                } else {
                    showToast("Пожалуйста, введите Email и пароль для входа.");
                }
            });
        }


        // =======================================================
        // ЛОГИКА РЕДАКТОРА (Оставлена как заглушки)
        // =======================================================
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileInput');
        const uploadModal = document.getElementById('uploadModal');
        const openUploadModalBtn = document.getElementById('openUploadModalBtn');
        const closeUploadModal = document.getElementById('closeUploadModal');
        const uploadModalBtn = document.getElementById('uploadModalBtn');
        const dynamicTextElement = document.getElementById('dynamic-text');
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        let originalLines = [];
        let channels = [];

        function showToast(message, count = null) { 
            const toastNotification = document.getElementById('toastNotification');
            const toastChannelCount = document.getElementById('toastChannelCount');
            
            toastChannelCount.classList.add('hidden');
            toastNotification.classList.remove('bg-green-600', 'bg-red-600'); 
            
            if (count !== null) {
                toastChannelCount.textContent = count;
                toastNotification.innerHTML = `Плейлист загружен. Каналов: <span class="font-bold">${count}</span>`;
                toastNotification.classList.add('bg-green-600'); 
            } else {
                toastNotification.textContent = message;
                if (message.includes('Ошибка') || message.includes('Не удалось') || message.includes('Пожалуйста') || message.includes('Email') || message.includes('Пароль') || message.includes('Неверный')) {
                    toastNotification.classList.add('bg-red-600'); 
                } else {
                    toastNotification.classList.add('bg-green-600');
                }
            }
            
            toastNotification.classList.remove('hidden');
            toastNotification.classList.add('animate-fade-in');

            setTimeout(() => {
                toastNotification.classList.add('hidden');
                toastNotification.classList.remove('animate-fade-in');
            }, 3000);
        }
        
        // -----------------------
        // LENDING PAGE ANIMATION & MENU 
        // -----------------------
        const phrases = [
            "вашего удобства.",
            "любых устройств.",
            "быстрого доступа.",
            "идеального порядка.",
            "полного контроля."
        ];

        let phraseIndex = 0;
        const transitionTime = 300;
        const displayTime = 2000;

        function changePhrase() {
            if(mainScreen && mainScreen.classList.contains('hidden')) return; 

            if (dynamicTextElement) {
                dynamicTextElement.style.opacity = '0'; 

                setTimeout(() => {
                    phraseIndex = (phraseIndex + 1) % phrases.length;
                    dynamicTextElement.textContent = phrases[phraseIndex];
                    dynamicTextElement.style.opacity = '1'; 
                }, transitionTime);
            }
        }

        setInterval(changePhrase, displayTime + transitionTime);

        if (menuToggle && mobileMenu) {
            menuToggle.addEventListener('click', () => {
                const isExpanded = mobileMenu.style.display === 'block';
                mobileMenu.style.display = isExpanded ? 'none' : 'block';
                menuToggle.querySelector('i').className = isExpanded ? 'fas fa-bars' : 'fas fa-times';
            });
            
            mobileMenu.querySelectorAll('a:not(.nav-button)').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.style.display = 'none';
                    menuToggle.querySelector('i').className = 'fas fa-bars';
                });
            });
        }
        
        const sections = document.querySelectorAll('main section');

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animated');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            rootMargin: '0px',
            threshold: 0.2
        });

        sections.forEach(section => {
             observer.observe(section);
        });

    </script>

</body>
</html>